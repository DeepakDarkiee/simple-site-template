<!DOCTYPE html>
<html lang="en">

<!-- Mirrored from simpleisbetterthancomplex.com/tutorial/2016/10/24/how-to-add-social-login-to-django.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 03 Sep 2021 12:46:40 GMT -->
<head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="ir-site-verification-token" value="-233745807">
<title>How to Add Social Login to Django</title>
<meta name="description" content="In this tutorial we will implement Facebook, Twitter and GitHub authentication using the social-auth-app-django library. They support several other services ...">
<link href="https://fonts.googleapis.com/css?family=Raleway:400,300,500,600,700" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="../../../../css/main71de.css?v=34">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="canonical" href="how-to-add-social-login-to-django.html">
<link rel="alternate" type="application/rss+xml" title="Simple is Better Than Complex" href="../../../../feed.xml" />
<link rel="icon" type="image/png" href="../../../../favicon.png">
<link rel="mask-icon" href="../../../../safari-pinned-tab.svg" color="#5bbad5">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
<script src="../../../../js/site7b30.js?v=4"></script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-42049022-10', 'auto');
    ga('send', 'pageview');
  </script>
  <script>
    $(function () {
      $("#ad").on("click", "#carbonads .carbon-wrap a", function () {
        var page_id = 'how-to-add-social-login-to-django.html';
        ga('send', 'event', 'carbonads', 'click', page_id, {
          'transport': 'beacon'
        });
      });
    });
  </script>
  <script>
  !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
  n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
  n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
  t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
  document,'script','https://connect.facebook.net/en_US/fbevents.js');
  fbq('init', '1689711451348257');
  fbq('track', 'PageView');
  </script>
  <noscript><img height="1" width="1" style="display:none" alt="PageView"
  src="https://www.facebook.com/tr?id=1689711451348257&amp;ev=PageView&amp;noscript=1"
  /></noscript>
  <script data-ad-client="ca-pub-5430683801108011" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


  <meta property="og:title" content="How to Add Social Login to Django">
<meta property="og:url" content="https://simpleisbetterthancomplex.com/tutorial/2016/10/24/how-to-add-social-login-to-django.html">
<meta property="og:image" content="https://simpleisbetterthancomplex.com/media/2016/10/featured-social.jpg">
<meta property="og:description" content="In this tutorial we will implement Facebook, Twitter and GitHub authentication using the social-auth-app-django library. They support several other services ...">
<meta property="og:site_name" content="Simple is Better Than Complex">
<meta property="og:locale" content="en_US">

  <meta property="article:published_time" content="2016-10-24T10:21:00+03:00">
  <meta property="article:author" content="https://facebook.com/vitorfs">

<meta property="fb:admins" content="100000024295617">
<meta property="fb:app_id" content="1645747765697865">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="vitorfs">
<meta name="twitter:creator" content="vitorfs">
<meta name="twitter:title" content="How to Add Social Login to Django">
<meta name="twitter:description" content="In this tutorial we will implement Facebook, Twitter and GitHub authentication using the social-auth-app-django library. They support several other services and the process should be somewhat simil...">
<meta name="twitter:image" content="https://simpleisbetterthancomplex.com/media/2016/10/featured-social.jpg">
<meta name="p:domain_verify" content="e262845cb18e4c68b0cff535a0eaea5d">
  <meta property="og:type" content="article">
  
    <meta property="article:tag" content="django">
  
    <meta property="article:tag" content="auth">
  
    <meta property="article:tag" content="social">
  
  <style type="text/css">
    @media (min-width: 750px) {
      body {
        /*padding-top:50px!important;*/
      }
    }
  </style>
  <script src="http://m.servedby-buysellads.com/monetization.js"></script>
</head>
<body>
  <div id="top" style="visibility: hidden"></div>
<header>
  <div class="container">
    <ul class="menu menu-right">
      <li class="menu-item">
        <a href="../../../../search/index.html">
          <span class="fa fa-search"></span>
        </a>
      </li>
      <li class="toggle-menu">
        <a href="javascript:void(0);">
          <span class="fa fa-bars"></span>
        </a>
      </li>
    </ul>
    <ul class="menu menu-left">
      <li class="logo">
        <a href="../../../../index.html" style="font-weight: 900">simple<span class="brand">is</span>better<span class="brand">than</span>complex</a>
      </li>
      <li class="menu-item">
        <a href="../../../../index.html">
          <span class="fa fa-home" style="margin-right: 3px"></span>
          Home
        </a>
      </li>
      <li class="menu-item">
        <a href="../../../../archive/index.html">
          <span class="fa fa-archive" style="margin-right: 3px"></span>
          Articles
        </a>
      </li>
      <li class="menu-item">
        <a href="../../../../videos/index.html">
          <span class="fa fa-video-camera" style="margin-right: 3px"></span>
          Videos
        </a>
      </li>
      <li class="menu-item">
        <a href="../../../../series/index.html">
          <span class="fa fa-book" style="margin-right: 3px"></span>
          Series
        </a>
      </li>
      <li class="menu-item">
        <a href="../../../../snippets/index.html">
          <span class="fa fa-code" style="margin-right: 3px"></span>
          Snippets
        </a>
      </li>
      <li class="menu-item">
        <a href="../../../../sponsor/index.html">
          <span class="fa fa-bullhorn" style="margin-right: 3px"></span>
          Sponsor
        </a>
      </li>
      <li class="menu-item">
        <a href="../../../../feed.xml" target="_blank">
          <span class="fa fa-rss" style="margin-right: 3px"></span>
          RSS
        </a>
      </li>
      <li class="menu-item">
        <a href="https://colossus.simpleisbetterthancomplex.com/subscribe/d2320a41-0378-4aa8-8f4e-5bb1ffcd521d/" class="brand" target="_blank">
          <span class="fa fa-send" style="margin-right: 3px"></span> Subscribe
        </a>
      </li>
      <li class="menu-item hidden-mobile">
        <a href="../../../../search/index.html">
          <span class="fa fa-search"></span> Search
        </a>
      </li>
    </ul>
  </div>
</header>

  <!--p style="text-align:center;font-size:1.4rem;margin-top:2rem;margin-bottom:2rem;">
    <span style="background-color:#1eaedb;color:#fff;border-radius:3px;padding:3px 5px;font-size:1.2rem;margin-right:5px;">Sponsored</span>
    <a href="/sponsor/" rel="noopener nofollow">
      By You? Learn more about sponsorship of the blog.
    </a>
  </p-->

  <main>
    <div class="container">
      <div class="row">
        <div class="ten offset-by-one columns content post">
          <div class="card post-author">
  <div class="author-picture">
    <img src="../../../../img/picture.jpg" alt="Vitor Freitas">
  </div>
  <div class="author-info">
    <p class="name">By <strong>Vitor Freitas</strong></p>
    <a href="https://www.digitalocean.com/?refcode=074832454ff1&amp;utm_campaign=Referral_Invite&amp;utm_medium=Referral_Program&amp;utm_source=badge" class="powered-by-do">
      <img src="https://web-platforms.sfo2.cdn.digitaloceanspaces.com/WWW/Badge 1.svg" alt="DigitalOcean Referral Badge">
    </a>
    <p class="bio">
      I'm a passionate software developer and researcher. I write about Python, Django and Web Development on a weekly basis. <a href="../../../../about/index.html" rel="author">Read more</a>.
    </p>
    <p class="contact">
      <a href="https://www.youtube.com/VitorFreitas" rel="me noopener" target="_blank" title="YouTube"><i class="fa fa-youtube-play"></i></a>
      <a href="https://github.com/vitorfs" rel="me noopener" target="_blank" title="GitHub"><i class="fa fa-github"></i></a>
      <a href="https://twitter.com/vitorfs" rel="me noopener" target="_blank" title="Twitter"><i class="fa fa-twitter"></i></a>
      <a href="https://facebook.com/vitorfs" rel="me noopener" target="_blank" title="Facebook"><i class="fa fa-facebook-official"></i></a>
      <a href="https://linkedin.com/in/vitorfs" rel="me noopener" target="_blank" title="LinkedIn"><i class="fa fa-linkedin-square"></i></a>
      <a href="https://instagram.com/vitorfs" rel="me noopener" target="_blank" title="Instagram"><i class="fa fa-instagram"></i></a>
      <a href="../../../../contact/index.html" title="Contact"><i class="fa fa-envelope"></i></a>
    </p>
  </div>
  
  
  <div class="row">
    <div class="six columns">
      <div id="ad">
        <script async type="text/javascript" src="http://cdn.carbonads.com/carbon.js?serve=CKYIEKQM&amp;placement=simpleisbetterthancomplexcom" id="_carbonads_js"></script>
      </div>
    </div>


    <!--div class="six columns">
      <div id="ad2">
        <div id="sponsored">
          <a href="/sponsor/">
            <img src="/media/sponsored/ad.png" alt="Advertise Here">
            <span>Reach 90k+ Django developers every month. Learn more about sponsorship of the blog.</span>
          </a>
          <small>
            <a href="/sponsor/">Sponsored</a>
          </small>
        </div>

        <div id="sponsored">
          <a href="https://click.linksynergy.com/link?id=phY4769lVwA&offerid=507388.567828&type=2&murl=https%3A%2F%2Fwww.udemy.com%2Fcomplete-python-bootcamp%2F" target="_blank" rel="noopener nofollow">
            <img border="0" src="https://udemy-images.udemy.com/course/480x270/567828_67d0.jpg" alt="Complete Python Bootcamp: Go from zero to hero in Python 3">
            <span>Complete Python Bootcamp: Go from zero to hero in Python 3</span>
          </a>
          <small>
            <a href="/sponsor/">Sponsored</a>
          </small>
          <img border="0" width="1" height="1" src="https://ad.linksynergy.com/fs-bin/show?id=phY4769lVwA&bids=507388.567828&type=2&subid=0" alt="LinkSynergy">
        </div>

      </div>
    </div-->


  </div>
  
</div>


          <p style="text-align:center;font-size:1.4rem;margin-bottom:4rem;">
            <i class="fa fa-youtube-play" style="color:#ff0000!important;"></i> <a href="https://www.youtube.com/VitorFreitas?sub_confirmation=1" target="_blank">Subscribe to our YouTube Channel!</a>
            <br>
            <a href="https://youtu.be/Udf4VbtM92Y" target="_blank">[Jul 12, 2021] New Video: How to Use Django Rest Framework Permissions (DRF Tutorial - Part 7)</a>
          </p>

          <div class="card">
            
  <h5 class="post-category">
    
      tutorial
    
  </h5>
  <hr class="dashed">

<h3 class="post-title">How to Add Social Login to Django</h3>
<ul class="post-meta">
  <li>
    <i class="fa fa-calendar"></i> Oct 24, 2016
  </li>
  <li>
    <i class="fa fa-clock-o"></i>
    17 minutes read
  </li>
  <li>
    <i class="fa fa-comments"></i>
    <a href="#disqus_thread" data-disqus-identifier="/tutorial/2016/10/24/how-to-add-social-login-to-django">comments</a>
  </li>
  <li>
    <i class="fa fa-eye"></i>
    <span class="ga-page-views" data-ga-identifier="how-to-add-social-login-to-django.html"></span> views
  </li>
  
  
</ul>

  <div class="post-featured-image">
    <img src="../../../../media/2016/10/featured-social.jpg" alt="How to Add Social Login to Django" class="featured-image">
    
      <small>(Picture: <a href="https://www.pexels.com/photo/nature-laptop-outside-macbook-6508/" target="_blank">https://www.pexels.com/photo/nature-laptop-outside-macbook-6508/</a>)</small>
    
  </div>


            <article>
              <div class="info">
    <strong><i class="fa fa-info-circle"></i> Updated at Mar 2, 2017:</strong>
    This post was updated to work with the newest version of the social-auth-app-django library.
</div>

<p>In this tutorial we will implement Facebook, Twitter and GitHub authentication using the <strong>social-auth-app-django</strong>
library. They support several other services and the process should be somewhat similar. The <strong>social-auth-app-django</strong>
library have several customization options, which sometimes makes it challenging to get started. So for this tutorial
I will guide you through the mandatory steps where in the end you will have a fully functional social authentication.</p>

<hr />

<h4 id="installation">Installation</h4>

<p>As usual, go for pip:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">pip install social-auth-app-django</code></pre></figure>

<p>Add the <code class="highlighter-rouge">social_django</code> to your <code class="highlighter-rouge">INSTALLED_APPS</code>:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s">'django.contrib.admin'</span><span class="p">,</span>
    <span class="s">'django.contrib.auth'</span><span class="p">,</span>
    <span class="s">'django.contrib.contenttypes'</span><span class="p">,</span>
    <span class="s">'django.contrib.sessions'</span><span class="p">,</span>
    <span class="s">'django.contrib.messages'</span><span class="p">,</span>
    <span class="s">'django.contrib.staticfiles'</span><span class="p">,</span>

    <span class="s">'social_django'</span><span class="p">,</span>  <span class="c"># &lt;--</span>

    <span class="s">'mysite.core'</span><span class="p">,</span>
<span class="p">]</span></code></pre></figure>

<p>Migrate the database:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">python manage.py migrate

Operations to perform:
  Apply all migrations: admin, auth, contenttypes, sessions, social_django
Running migrations:
  Applying social_django.0001_initial... OK
  Applying social_django.0002_add_related_name... OK
  Applying social_django.0003_alter_email_max_length... OK
  Applying social_django.0004_auto_20160423_0400... OK
  Applying social_django.0005_auto_20160727_2333... OK
  Applying social_django.0006_partial... OK</code></pre></figure>

<p>The library will automatically handle authentication tokens and all the required information to deal with OAuth and
OAuth2. Generally speaking, you won’t need to handle it manually nor access the user’s social profile.</p>

<hr />

<h4 id="configuration">Configuration</h4>

<p>Update the <code class="highlighter-rouge">MIDDLEWARE_CLASSES</code> by adding the <code class="highlighter-rouge">SocialAuthExceptionMiddleware</code> to the end of it:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">MIDDLEWARE_CLASSES</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s">'django.middleware.security.SecurityMiddleware'</span><span class="p">,</span>
    <span class="s">'django.contrib.sessions.middleware.SessionMiddleware'</span><span class="p">,</span>
    <span class="s">'django.middleware.common.CommonMiddleware'</span><span class="p">,</span>
    <span class="s">'django.middleware.csrf.CsrfViewMiddleware'</span><span class="p">,</span>
    <span class="s">'django.contrib.auth.middleware.AuthenticationMiddleware'</span><span class="p">,</span>
    <span class="s">'django.contrib.auth.middleware.SessionAuthenticationMiddleware'</span><span class="p">,</span>
    <span class="s">'django.contrib.messages.middleware.MessageMiddleware'</span><span class="p">,</span>
    <span class="s">'django.middleware.clickjacking.XFrameOptionsMiddleware'</span><span class="p">,</span>

    <span class="s">'social_django.middleware.SocialAuthExceptionMiddleware'</span><span class="p">,</span>  <span class="c"># &lt;--</span>
<span class="p">]</span></code></pre></figure>

<p>Now we update the <code class="highlighter-rouge">context_processors</code> inside <code class="highlighter-rouge">TEMPLATE</code>:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">TEMPLATES</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s">'BACKEND'</span><span class="p">:</span> <span class="s">'django.template.backends.django.DjangoTemplates'</span><span class="p">,</span>
        <span class="s">'DIRS'</span><span class="p">:</span> <span class="p">[</span>
            <span class="n">PROJECT_DIR</span><span class="o">.</span><span class="n">child</span><span class="p">(</span><span class="s">'templates'</span><span class="p">),</span>
        <span class="p">],</span>
        <span class="s">'APP_DIRS'</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
        <span class="s">'OPTIONS'</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">'context_processors'</span><span class="p">:</span> <span class="p">[</span>
                <span class="s">'django.template.context_processors.debug'</span><span class="p">,</span>
                <span class="s">'django.template.context_processors.request'</span><span class="p">,</span>
                <span class="s">'django.contrib.auth.context_processors.auth'</span><span class="p">,</span>
                <span class="s">'django.contrib.messages.context_processors.messages'</span><span class="p">,</span>

                <span class="s">'social_django.context_processors.backends'</span><span class="p">,</span>  <span class="c"># &lt;--</span>
                <span class="s">'social_django.context_processors.login_redirect'</span><span class="p">,</span> <span class="c"># &lt;--</span>
            <span class="p">]</span>
        <span class="p">},</span>
    <span class="p">},</span>
<span class="p">]</span></code></pre></figure>

<p>Add the <code class="highlighter-rouge">AUTHENTICATION_BACKENDS</code>:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">AUTHENTICATION_BACKENDS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s">'social_core.backends.github.GithubOAuth2'</span><span class="p">,</span>
    <span class="s">'social_core.backends.twitter.TwitterOAuth'</span><span class="p">,</span>
    <span class="s">'social_core.backends.facebook.FacebookOAuth2'</span><span class="p">,</span>

    <span class="s">'django.contrib.auth.backends.ModelBackend'</span><span class="p">,</span>
<span class="p">)</span></code></pre></figure>

<p>So, as you can see, here at this point we will need to specify the correct backends, depending on your needs. Since
here in this example we will be working with <strong>GitHub</strong>, <strong>Twitter</strong> and <strong>Facebook</strong> I just added those three
backends.</p>

<p>Update the <strong>urls.py</strong> add the <strong>social-auth-app-django</strong> urls:</p>

<p><strong>urls.py</strong></p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">url</span><span class="p">,</span> <span class="n">include</span>
<span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth</span> <span class="kn">import</span> <span class="n">views</span> <span class="k">as</span> <span class="n">auth_views</span>

<span class="kn">from</span> <span class="nn">mysite.core</span> <span class="kn">import</span> <span class="n">views</span> <span class="k">as</span> <span class="n">core_views</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r'^$'</span><span class="p">,</span> <span class="n">core_views</span><span class="o">.</span><span class="n">home</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'home'</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r'^login/$'</span><span class="p">,</span> <span class="n">auth_views</span><span class="o">.</span><span class="n">login</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'login'</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r'^logout/$'</span><span class="p">,</span> <span class="n">auth_views</span><span class="o">.</span><span class="n">logout</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'logout'</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r'^oauth/'</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s">'social_django.urls'</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="s">'social'</span><span class="p">)),</span>  <span class="c"># &lt;--</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r'^admin/'</span><span class="p">,</span> <span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">urls</span><span class="p">),</span>
<span class="p">]</span></code></pre></figure>

<p>Let’s set the default values for the <code class="highlighter-rouge">LOGIN_URL</code>, <code class="highlighter-rouge">LOGOUT_URL</code> and the <code class="highlighter-rouge">LOGIN_REDIRECT_URL</code>.
The <code class="highlighter-rouge">LOGIN_REDIRECT_URL</code> will be used to redirect the user after authenticating from Django Login <em>and</em> Social Auth.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">LOGIN_URL</span> <span class="o">=</span> <span class="s">'login'</span>
<span class="n">LOGOUT_URL</span> <span class="o">=</span> <span class="s">'logout'</span>
<span class="n">LOGIN_REDIRECT_URL</span> <span class="o">=</span> <span class="s">'home'</span></code></pre></figure>

<p>As we are using the built-in <code class="highlighter-rouge">login</code> and <code class="highlighter-rouge">logout</code> views, let’s just create the <code class="highlighter-rouge">home</code> view inside the <strong>core</strong> app:</p>

<p><strong>views.py</strong></p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.contrib.auth.decorators</span> <span class="kn">import</span> <span class="n">login_required</span>
<span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render</span>

<span class="nd">@login_required</span>
<span class="k">def</span> <span class="nf">home</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">'core/home.html'</span><span class="p">)</span></code></pre></figure>

<p><strong>home.html</strong></p>

<figure class="highlight"><pre><code class="language-django" data-lang="django"><span class="cp">{%</span> <span class="k">extends</span> <span class="s1">'base.html'</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>
  <span class="nt">&lt;h2&gt;</span>Homepage<span class="nt">&lt;/h2&gt;</span>
  <span class="nt">&lt;p&gt;</span>Hello <span class="cp">{{</span> <span class="nv">user.username</span> <span class="cp">}}</span>!<span class="nt">&lt;/p&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span></code></pre></figure>

<p>We are good to go. For each social network you will need to register your app in their system. So from now on the steps
will vary on the service provider. Let’s tackle them one at a time. First one: <strong>GitHub</strong>.</p>

<hr />

<h4 id="github-authentication">GitHub Authentication</h4>

<p>Log in to your <strong>GitHub</strong> account, go to <strong>Settings</strong>. In the left menu you will see <strong>Developer settings</strong>. Click on
<strong>OAuth applications</strong>.</p>

<p>In the <strong>OAuth applications</strong> screen click on <strong>Register a new application</strong>. Or simply click on the link below:</p>

<p><a href="https://github.com/settings/applications/new" target="_blank">https://github.com/settings/applications/new</a></p>

<p>Provide the information below:</p>

<p><img src="../../../../media/2016/10/github-app.png" alt="New GitHub OAuth Application" /></p>

<p>The important step here is the <strong>Authorization callback URL</strong>. Notice that I’m putting a localhost URL.
<strong>http://localhost:8000/oauth/complete/github/</strong>.</p>

<p>After you create the app, you will be redirected to this screen:</p>

<p><img src="../../../../media/2016/10/github-app2.png" alt="New GitHub OAuth Application" /></p>

<p>PS: Keep this information safe. I’m putting it here just so it is more explicit in the example. For the running
application you will find in the end of this tutorial it uses different credentials.</p>

<p>Anyhoo, let’s grab the information we need:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">Client ID
44fd4145a8d85fda4ff1
Client Secret
2de7904bdefe32d315805d3b7daec7906cc0e9e7</code></pre></figure>

<p>Now we update the <strong>settings.py</strong>:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">SOCIAL_AUTH_GITHUB_KEY</span> <span class="o">=</span> <span class="s">'44fd4145a8d85fda4ff1'</span>
<span class="n">SOCIAL_AUTH_GITHUB_SECRET</span> <span class="o">=</span> <span class="s">'2de7904bdefe32d315805d3b7daec7906cc0e9e7'</span></code></pre></figure>

<p>PS 2: It is not a good idea to keep this kind of information directly in the <strong>settings.py</strong>. Please refer to this
article <a href="../../../../2015/11/26/package-of-the-week-python-decouple.html">Package of the Week: Python Decouple</a> to learn how to
separate configuration from settings.</p>

<h5 id="login-view">Login View</h5>

<p>Let’s create a Login View that can both handle Django Login and the GitHub Login. The default login view look for a
template in <strong>registration/login.html</strong>. Let’s create it:</p>

<p><strong>registration/login.html</strong></p>

<figure class="highlight"><pre><code class="language-django" data-lang="django"><span class="cp">{%</span> <span class="k">extends</span> <span class="s1">'base.html'</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>
  <span class="nt">&lt;h2&gt;</span>Login<span class="nt">&lt;/h2&gt;</span>
  <span class="nt">&lt;form</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="cp">{%</span> <span class="nv">csrf_token</span> <span class="cp">%}</span>
    <span class="cp">{{</span> <span class="nv">form.as_p</span> <span class="cp">}}</span>
    <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"submit"</span><span class="nt">&gt;</span>Login<span class="nt">&lt;/button&gt;</span>
  <span class="nt">&lt;/form&gt;</span>
  <span class="nt">&lt;br&gt;</span>
  <span class="nt">&lt;p&gt;&lt;strong&gt;</span>-- OR --<span class="nt">&lt;/strong&gt;&lt;/p&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{%</span> <span class="nv">url</span> <span class="s1">'social:begin'</span> <span class="s1">'github'</span> <span class="cp">%}</span><span class="s">"</span><span class="nt">&gt;</span>Login with GitHub<span class="nt">&lt;/a&gt;&lt;br&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span></code></pre></figure>

<p>Note that the important part to start the GitHub authentication is <code class="highlighter-rouge"><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">url</span><span class="w"> </span><span class="err">'social:begin'</span><span class="w"> </span><span class="err">'github'</span><span class="w"> </span><span class="err">%</span><span class="p">}</span></code>.</p>

<p>At the moment our login page should look like this:</p>

<p><img src="../../../../media/2016/10/login.png" alt="Login Page" /></p>

<p>A good thing about the social login is that the process to both Login or Signup is pretty much the same. Meaning that
the user without having an account in your application, he/she can login. If there is no account matching the
username/email, an account will automatically be created.</p>

<p>Let’s try our new <strong>Login with GitHub</strong> link:</p>

<p><img src="../../../../media/2016/10/github-login.png" alt="GitHub Login Page" /></p>

<p>Click on <strong>Authorize application</strong></p>

<p><img src="../../../../media/2016/10/github-login-success.png" alt="GitHub Login Success" /></p>

<p>And there you go! An account was just created and is signed in!</p>

<p>There is a small caveat in cases like this: the user have created an account but have no password. We will address this
issue later on.</p>

<hr />

<h4 id="twitter-login">Twitter Login</h4>

<p>Go to <a href="https://apps.twitter.com/" target="_blank">apps.twitter.com</a> and click on <strong>Create New App</strong>.</p>

<p>Add the details just like you did with the GitHub App:</p>

<p><img src="../../../../media/2016/10/twitter.png" alt="Twitter App" /></p>

<p>For Twitter we will use the <strong>http://localhost:8000/oauth/complete/twitter/</strong> callback url.</p>

<p>Go to <strong>Permissions</strong> tab and change the permissions to <strong>Read Only</strong>:</p>

<p><img src="../../../../media/2016/10/twitter-permission.png" alt="Twitter App Permissions" /></p>

<p>The less permissions we have better. This way we make our users more comfortable.</p>

<p>Now go to <strong>Keys and Access Tokens</strong> tab and grab the <strong>Consumer Key (API Key)</strong> and <strong>Consumer Secret (API Secret)</strong> and
update the <strong>settings.py</strong>:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">SOCIAL_AUTH_TWITTER_KEY</span> <span class="o">=</span> <span class="s">'9TD12xahCWCDdyLzpmw61GSM9'</span>
<span class="n">SOCIAL_AUTH_TWITTER_SECRET</span> <span class="o">=</span> <span class="s">'mwtdcUe4uOvvJjDk2AuQ9Mq2xiHPw3740m5iGLf6hwg3B4TNSx'</span></code></pre></figure>

<p>To enable the Twitter login, simply update the <strong>registration/login.html</strong> template:</p>

<figure class="highlight"><pre><code class="language-django" data-lang="django"><span class="cp">{%</span> <span class="k">extends</span> <span class="s1">'base.html'</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>
  <span class="nt">&lt;h2&gt;</span>Login<span class="nt">&lt;/h2&gt;</span>
  <span class="nt">&lt;form</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="cp">{%</span> <span class="nv">csrf_token</span> <span class="cp">%}</span>
    <span class="cp">{{</span> <span class="nv">form.as_p</span> <span class="cp">}}</span>
    <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"submit"</span><span class="nt">&gt;</span>Login<span class="nt">&lt;/button&gt;</span>
  <span class="nt">&lt;/form&gt;</span>
  <span class="nt">&lt;br&gt;</span>
  <span class="nt">&lt;p&gt;&lt;strong&gt;</span>-- OR --<span class="nt">&lt;/strong&gt;&lt;/p&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{%</span> <span class="nv">url</span> <span class="s1">'social:begin'</span> <span class="s1">'github'</span> <span class="cp">%}</span><span class="s">"</span><span class="nt">&gt;</span>Login with GitHub<span class="nt">&lt;/a&gt;&lt;br&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{%</span> <span class="nv">url</span> <span class="s1">'social:begin'</span> <span class="s1">'twitter'</span> <span class="cp">%}</span><span class="s">"</span><span class="nt">&gt;</span>Login with Twitter<span class="nt">&lt;/a&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span></code></pre></figure>

<p><img src="../../../../media/2016/10/twitter-login.png" alt="Twitter Login" /></p>

<p>Let’s try it:</p>

<p><img src="../../../../media/2016/10/twitter-login-authorize.png" alt="Twitter Login" />
<img src="../../../../media/2016/10/twitter-login-success.png" alt="Twitter Login" /></p>

<p>And there you go!</p>

<p>See how it created a new user with a unglier name? <strong>vitorfs742c692ac9494871</strong>. That’s because both my username on
GitHub and on Twitter is <strong>vitorfs</strong>. And just from the username we can’t guarantee that it’s the same user, the
<strong>social-auth-app-django</strong> handles it by creating a new user and appending an arbitrary string to the end of it.</p>

<p>That’s okay for now! I will show later on where you can work out this behaviour.</p>

<hr />

<h4 id="facebook-login">Facebook Login</h4>

<p>Go to <a href="https://developers.facebook.com/" target="_blank">developers.facebook.com/</a> click on <strong>My Apps</strong> and then
<strong>Add a New App</strong>.</p>

<p><img src="../../../../media/2016/10/facebook-app.png" alt="Facebook App" /></p>

<p>Pick <strong>Website</strong>.</p>

<p><img src="../../../../media/2016/10/facebook-app2.png" alt="Facebook App" /></p>

<p><img src="../../../../media/2016/10/facebook-app3.png" alt="Facebook App" /></p>

<p>Click on <strong>Create App ID</strong>. On the next screen click on <strong>Skip Quick Start</strong>.</p>

<p>From the initial page, grab the <strong>App ID</strong> and <strong>App Secret</strong> (click on the <strong>Show</strong> button to get it as plain text):</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">SOCIAL_AUTH_FACEBOOK_KEY</span> <span class="o">=</span> <span class="s">'451821651x33143'</span>  <span class="c"># App ID</span>
<span class="n">SOCIAL_AUTH_FACEBOOK_SECRET</span> <span class="o">=</span> <span class="s">'524fada3c3ca5adgb279da535da1d863'</span>  <span class="c"># App Secret</span></code></pre></figure>

<p>Now go to <strong>Settings / Basic</strong>. First click on the button <strong>+ Add Platform</strong> and add a website. For the <strong>Site URL</strong>
put <strong>http://localhost:8000</strong> and then in the <strong>App Domains</strong> put just <strong>localhost</strong>, like the picture below:</p>

<p><img src="../../../../media/2016/10/facebook-app4.png" alt="Facebook App" /></p>

<p>PS: For Facebook we can’t use <strong>127.0.0.1</strong> as the callback. Instead use <strong>localhost</strong>. Or add a fake host in your local
hosts. Usually you can find it at <strong>/etc/hosts</strong>.</p>

<p>Save changes and we are good to go. Now update the <strong>registration/login.html</strong> file with the Facebook link:</p>

<figure class="highlight"><pre><code class="language-django" data-lang="django"><span class="cp">{%</span> <span class="k">extends</span> <span class="s1">'base.html'</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>
  <span class="nt">&lt;h2&gt;</span>Login<span class="nt">&lt;/h2&gt;</span>
  <span class="nt">&lt;form</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="cp">{%</span> <span class="nv">csrf_token</span> <span class="cp">%}</span>
    <span class="cp">{{</span> <span class="nv">form.as_p</span> <span class="cp">}}</span>
    <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"submit"</span><span class="nt">&gt;</span>Login<span class="nt">&lt;/button&gt;</span>
  <span class="nt">&lt;/form&gt;</span>
  <span class="nt">&lt;br&gt;</span>
  <span class="nt">&lt;p&gt;&lt;strong&gt;</span>-- OR --<span class="nt">&lt;/strong&gt;&lt;/p&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{%</span> <span class="nv">url</span> <span class="s1">'social:begin'</span> <span class="s1">'github'</span> <span class="cp">%}</span><span class="s">"</span><span class="nt">&gt;</span>Login with GitHub<span class="nt">&lt;/a&gt;&lt;br&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{%</span> <span class="nv">url</span> <span class="s1">'social:begin'</span> <span class="s1">'twitter'</span> <span class="cp">%}</span><span class="s">"</span><span class="nt">&gt;</span>Login with Twitter<span class="nt">&lt;/a&gt;&lt;br&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{%</span> <span class="nv">url</span> <span class="s1">'social:begin'</span> <span class="s1">'facebook'</span> <span class="cp">%}</span><span class="s">"</span><span class="nt">&gt;</span>Login with Facebook<span class="nt">&lt;/a&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span></code></pre></figure>

<p>Let’s try it now:</p>

<p><img src="../../../../media/2016/10/facebook-app7.png" alt="Facebook App" /></p>

<p><img src="../../../../media/2016/10/facebook-app5.png" alt="Facebook App" /></p>

<p><img src="../../../../media/2016/10/facebook-app6.png" alt="Facebook App" /></p>

<hr />

<h4 id="social-auth-management-page">Social Auth Management Page</h4>

<p>We can now add a Settings page in our application, where the user can manage the social auth logins. It’s a good way
for the user authorize new services or revoke the access.</p>

<p>Basically this page will be responsible for:</p>

<ul>
  <li>Disconnecting the user from the social networks</li>
  <li>Control if the user can disconnect (that is, the user have defined a password, so he/she won’t be locked out of the system)</li>
  <li>Provide means to connect to other social networks</li>
</ul>

<p><strong>urls.py</strong></p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="o">...</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r'^settings/$'</span><span class="p">,</span> <span class="n">core_views</span><span class="o">.</span><span class="n">settings</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'settings'</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r'^settings/password/$'</span><span class="p">,</span> <span class="n">core_views</span><span class="o">.</span><span class="n">password</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'password'</span><span class="p">),</span>
<span class="p">]</span></code></pre></figure>

<p>A password view will be very important in this case!</p>

<p>Now update the project <strong>settings.py</strong> file with the following configurations:</p>

<p><strong>settings.py</strong></p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">SOCIAL_AUTH_LOGIN_ERROR_URL</span> <span class="o">=</span> <span class="s">'/settings/'</span>
<span class="n">SOCIAL_AUTH_LOGIN_REDIRECT_URL</span> <span class="o">=</span> <span class="s">'/settings/'</span>
<span class="n">SOCIAL_AUTH_RAISE_EXCEPTIONS</span> <span class="o">=</span> <span class="bp">False</span></code></pre></figure>

<p><strong>views.py</strong></p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.contrib.auth.decorators</span> <span class="kn">import</span> <span class="n">login_required</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth.forms</span> <span class="kn">import</span> <span class="n">AdminPasswordChangeForm</span><span class="p">,</span> <span class="n">PasswordChangeForm</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth</span> <span class="kn">import</span> <span class="n">update_session_auth_hash</span>
<span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">messages</span>
<span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render</span><span class="p">,</span> <span class="n">redirect</span>

<span class="kn">from</span> <span class="nn">social_django.models</span> <span class="kn">import</span> <span class="n">UserSocialAuth</span>

<span class="nd">@login_required</span>
<span class="k">def</span> <span class="nf">home</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">'core/home.html'</span><span class="p">)</span>

<span class="nd">@login_required</span>
<span class="k">def</span> <span class="nf">settings</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">github_login</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">social_auth</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s">'github'</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">UserSocialAuth</span><span class="o">.</span><span class="n">DoesNotExist</span><span class="p">:</span>
        <span class="n">github_login</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">twitter_login</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">social_auth</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s">'twitter'</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">UserSocialAuth</span><span class="o">.</span><span class="n">DoesNotExist</span><span class="p">:</span>
        <span class="n">twitter_login</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">facebook_login</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">social_auth</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s">'facebook'</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">UserSocialAuth</span><span class="o">.</span><span class="n">DoesNotExist</span><span class="p">:</span>
        <span class="n">facebook_login</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="n">can_disconnect</span> <span class="o">=</span> <span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">social_auth</span><span class="o">.</span><span class="n">count</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">user</span><span class="o">.</span><span class="n">has_usable_password</span><span class="p">())</span>

    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">'core/settings.html'</span><span class="p">,</span> <span class="p">{</span>
        <span class="s">'github_login'</span><span class="p">:</span> <span class="n">github_login</span><span class="p">,</span>
        <span class="s">'twitter_login'</span><span class="p">:</span> <span class="n">twitter_login</span><span class="p">,</span>
        <span class="s">'facebook_login'</span><span class="p">:</span> <span class="n">facebook_login</span><span class="p">,</span>
        <span class="s">'can_disconnect'</span><span class="p">:</span> <span class="n">can_disconnect</span>
    <span class="p">})</span>

<span class="nd">@login_required</span>
<span class="k">def</span> <span class="nf">password</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">has_usable_password</span><span class="p">():</span>
        <span class="n">PasswordForm</span> <span class="o">=</span> <span class="n">PasswordChangeForm</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">PasswordForm</span> <span class="o">=</span> <span class="n">AdminPasswordChangeForm</span>

    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s">'POST'</span><span class="p">:</span>
        <span class="n">form</span> <span class="o">=</span> <span class="n">PasswordForm</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">form</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">form</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
            <span class="n">update_session_auth_hash</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">form</span><span class="o">.</span><span class="n">user</span><span class="p">)</span>
            <span class="n">messages</span><span class="o">.</span><span class="n">success</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">'Your password was successfully updated!'</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s">'password'</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">messages</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">'Please correct the error below.'</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">form</span> <span class="o">=</span> <span class="n">PasswordForm</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">'core/password.html'</span><span class="p">,</span> <span class="p">{</span><span class="s">'form'</span><span class="p">:</span> <span class="n">form</span><span class="p">})</span></code></pre></figure>

<p>Please note that this <strong>password</strong> view handle both Set password and Change password.</p>

<p><strong>settings.html</strong></p>

<figure class="highlight"><pre><code class="language-django" data-lang="django"><span class="cp">{%</span> <span class="k">extends</span> <span class="s1">'base.html'</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>
  <span class="nt">&lt;h2&gt;</span>Settings<span class="nt">&lt;/h2&gt;</span>

  <span class="nt">&lt;h3&gt;</span>GitHub<span class="nt">&lt;/h3&gt;</span>
  <span class="cp">{%</span> <span class="k">if</span> <span class="nv">github_login</span> <span class="cp">%}</span>
    <span class="nt">&lt;p&gt;</span>Connected as <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"https://github.com/</span><span class="cp">{{</span> <span class="nv">github_login.extra_data.login</span> <span class="cp">}}</span><span class="s">/"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">github_login.extra_data.login</span> <span class="cp">}}</span><span class="nt">&lt;/a&gt;&lt;/p&gt;</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">can_disconnect</span> <span class="cp">%}</span>
      <span class="nt">&lt;form</span> <span class="na">method=</span><span class="s">"post"</span> <span class="na">action=</span><span class="s">"</span><span class="cp">{%</span> <span class="nv">url</span> <span class="s1">'social:disconnect'</span> <span class="s1">'github'</span> <span class="cp">%}</span><span class="s">"</span><span class="nt">&gt;</span>
        <span class="cp">{%</span> <span class="nv">csrf_token</span> <span class="cp">%}</span>
        <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"submit"</span><span class="nt">&gt;</span>Disconnect from GitHub<span class="nt">&lt;/button&gt;</span>
      <span class="nt">&lt;/form&gt;</span>
    <span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
      <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">disabled</span><span class="nt">&gt;</span>Disconnect from GitHub<span class="nt">&lt;/button&gt;</span>
      <span class="nt">&lt;p</span> <span class="na">style=</span><span class="s">"color: red"</span><span class="nt">&gt;</span>You must <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{%</span> <span class="nv">url</span> <span class="s1">'password'</span> <span class="cp">%}</span><span class="s">"</span><span class="nt">&gt;</span>define a password<span class="nt">&lt;/a&gt;</span> for your account before disconnecting from Github.<span class="nt">&lt;/p&gt;</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
  <span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{%</span> <span class="nv">url</span> <span class="s1">'social:begin'</span> <span class="s1">'github'</span> <span class="cp">%}</span><span class="s">"</span><span class="nt">&gt;</span>Connect to GitHub<span class="nt">&lt;/a&gt;</span>
  <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>

  <span class="nt">&lt;h3&gt;</span>Twitter<span class="nt">&lt;/h3&gt;</span>
  <span class="cp">{%</span> <span class="k">if</span> <span class="nv">twitter_login</span> <span class="cp">%}</span>
    <span class="nt">&lt;p&gt;</span>Connected as <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"https://twitter.com/</span><span class="cp">{{</span> <span class="nv">twitter_login.extra_data.access_token.screen_name</span> <span class="cp">}}</span><span class="s">/"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>@<span class="cp">{{</span> <span class="nv">twitter_login.extra_data.access_token.screen_name</span> <span class="cp">}}</span><span class="nt">&lt;/a&gt;&lt;/p&gt;</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">can_disconnect</span> <span class="cp">%}</span>
      <span class="nt">&lt;form</span> <span class="na">method=</span><span class="s">"post"</span> <span class="na">action=</span><span class="s">"</span><span class="cp">{%</span> <span class="nv">url</span> <span class="s1">'social:disconnect'</span> <span class="s1">'twitter'</span> <span class="cp">%}</span><span class="s">"</span><span class="nt">&gt;</span>
        <span class="cp">{%</span> <span class="nv">csrf_token</span> <span class="cp">%}</span>
        <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"submit"</span><span class="nt">&gt;</span>Disconnect from Twitter<span class="nt">&lt;/button&gt;</span>
      <span class="nt">&lt;/form&gt;</span>
    <span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
      <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">disabled</span><span class="nt">&gt;</span>Disconnect from Twitter<span class="nt">&lt;/button&gt;</span>
      <span class="nt">&lt;p</span> <span class="na">style=</span><span class="s">"color: red"</span><span class="nt">&gt;</span>You must <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{%</span> <span class="nv">url</span> <span class="s1">'password'</span> <span class="cp">%}</span><span class="s">"</span><span class="nt">&gt;</span>define a password<span class="nt">&lt;/a&gt;</span> for your account before disconnecting from Twitter.<span class="nt">&lt;/p&gt;</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
  <span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{%</span> <span class="nv">url</span> <span class="s1">'social:begin'</span> <span class="s1">'twitter'</span> <span class="cp">%}</span><span class="s">"</span><span class="nt">&gt;</span>Connect to Twitter<span class="nt">&lt;/a&gt;</span>
  <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>

  <span class="nt">&lt;h3&gt;</span>Facebook<span class="nt">&lt;/h3&gt;</span>
  <span class="cp">{%</span> <span class="k">if</span> <span class="nv">facebook_login</span> <span class="cp">%}</span>
    <span class="nt">&lt;p&gt;</span>Connected as <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"https://facebook.com/</span><span class="cp">{{</span> <span class="nv">facebook_login.extra_data.id</span> <span class="cp">}}</span><span class="s">/"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">facebook_login.extra_data.id</span> <span class="cp">}}</span><span class="nt">&lt;/a&gt;&lt;/p&gt;</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">can_disconnect</span> <span class="cp">%}</span>
      <span class="nt">&lt;form</span> <span class="na">method=</span><span class="s">"post"</span> <span class="na">action=</span><span class="s">"</span><span class="cp">{%</span> <span class="nv">url</span> <span class="s1">'social:disconnect'</span> <span class="s1">'facebook'</span> <span class="cp">%}</span><span class="s">"</span><span class="nt">&gt;</span>
        <span class="cp">{%</span> <span class="nv">csrf_token</span> <span class="cp">%}</span>
        <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"submit"</span><span class="nt">&gt;</span>Disconnect from Facebook<span class="nt">&lt;/button&gt;</span>
      <span class="nt">&lt;/form&gt;</span>
    <span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
      <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">disabled</span><span class="nt">&gt;</span>Disconnect from Facebook<span class="nt">&lt;/button&gt;</span>
      <span class="nt">&lt;p</span> <span class="na">style=</span><span class="s">"color: red"</span><span class="nt">&gt;</span>You must <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{%</span> <span class="nv">url</span> <span class="s1">'password'</span> <span class="cp">%}</span><span class="s">"</span><span class="nt">&gt;</span>define a password<span class="nt">&lt;/a&gt;</span> for your account before disconnecting from Facebook.<span class="nt">&lt;/p&gt;</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
  <span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{%</span> <span class="nv">url</span> <span class="s1">'social:begin'</span> <span class="s1">'facebook'</span> <span class="cp">%}</span><span class="s">"</span><span class="nt">&gt;</span>Connect to Facebook<span class="nt">&lt;/a&gt;</span>
  <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span></code></pre></figure>

<p>If you look close, it’s just a repetitive work. Basically we are showing if the account is connected with one of the
providers, and giving the option to disconnect (whenever it is possible).</p>

<p>Finally the password view, in case you are wondering what it looks like:</p>

<p><strong>password.html</strong></p>

<figure class="highlight"><pre><code class="language-django" data-lang="django"><span class="cp">{%</span> <span class="k">extends</span> <span class="s1">'base.html'</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>
  <span class="nt">&lt;h2&gt;</span>Change Password<span class="nt">&lt;/h2&gt;</span>
  <span class="cp">{%</span> <span class="k">if</span> <span class="ow">not</span> <span class="nv">user.has_usable_password</span> <span class="cp">%}</span>
    <span class="nt">&lt;p</span> <span class="na">style=</span><span class="s">"color: red"</span><span class="nt">&gt;</span>You have not defined a password yet.<span class="nt">&lt;/p&gt;</span>
  <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
  <span class="nt">&lt;form</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="cp">{%</span> <span class="nv">csrf_token</span> <span class="cp">%}</span>
    <span class="cp">{{</span> <span class="nv">form.as_p</span> <span class="cp">}}</span>
    <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"submit"</span><span class="nt">&gt;</span>Save changes<span class="nt">&lt;/button&gt;</span>
  <span class="nt">&lt;/form&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span></code></pre></figure>

<p>The <strong>/settings/</strong> page will look like this:</p>

<p><img src="../../../../media/2016/10/settings.png" alt="Social Settings" /></p>

<p>In case I disconnect from Twitter for example, the GitHub Disconnect button will be disabled:</p>

<p><img src="../../../../media/2016/10/settings2.png" alt="Social Settings" /></p>

<p>This way we force the user to set a password before disconnecting from GitHub, avoiding her/him to be locked out.</p>

<hr />

<h4 id="next-steps">Next Steps</h4>

<ul>
  <li>Read the <a href="http://psa.matiasaguirre.net/docs/index.html" target="_blank">official documentation</a> for more information</li>
  <li>Learn more about <a href="../../../../2015/11/26/package-of-the-week-python-decouple.html">how to deal with sensitive information</a> in the settings.py</li>
  <li>See this example online at <a href="http://simple-social-auth.vitorfs.com/" target="_blank">simple-social-auth.vitorfs.com</a></li>
  <li>Grab the code on GitHub <a href="https://github.com/sibtc/simple-social-auth/" target="_blank">github.com/sibtc/simple-social-auth</a>.</li>
</ul>


            </article>
            
            <hr>
            <div class="popular-posts related-posts">
  <h4>Related Posts</h4>
    <div class="row">
      <div class="four columns">
<a href="../../../2018/12/19/how-to-use-jwt-authentication-with-django-rest-framework.html">
<img src="../../../../media/2018/12/featured-jwt.jpg" alt="How to Use JWT Authentication with Django REST Framework" title="How to Use JWT Authentication with Django REST Framework">
How to Use JWT Authentication with Django REST Framework
</a>
</div>
<div class="four columns">
<a href="../../../2018/11/22/how-to-implement-token-authentication-using-django-rest-framework.html">
<img src="../../../../media/2018/11/featured-rest.jpg" alt="How to Implement Token Authentication using Django REST Framework" title="How to Implement Token Authentication using Django REST Framework">
How to Implement Token Authentication using Django REST Framework
</a>
</div>
<div class="four columns">
<a href="../../../../videos/2018/11/04/django-auth-video-tutorial.html">
<img src="../../../../media/2018/11/featured-auth.jpg" alt="Django Authentication Video Tutorial" title="Django Authentication Video Tutorial">
Django Authentication Video Tutorial
</a>
</div>
    </div>
</div>


            <hr class="dashed">
<div class="row">
  <div class="six columns post-tags" style="padding-top: 4px">
    
      <a href="../../../../tag/django/index.html"><span class="tag">django</span></a>
    
      <a href="../../../../tag/auth/index.html"><span class="tag">auth</span></a>
    
      <a href="../../../../tag/social/index.html"><span class="tag">social</span></a>
    
  </div>
  <div class="six columns post-share">
    <div class="social">
  Share this post
  <a href="http://vk.com/share.php?url=http://sibt.co/2mYL0FL"
     rel="nofollow"
     target="_blank"
     title="Share on VK">
    <i class="fa fa-vk"></i>
  </a>
  <a href="https://twitter.com/intent/tweet?text=How%20to%20Add%20Social%20Login%20to%20Django&amp;url=http://sibt.co/2nDW4Ft&amp;via=vitorfs&amp;related=vitorfs"
     rel="nofollow"
     target="_blank"
     title="Share on Twitter">
    <i class="fa fa-twitter"></i>
  </a>
  <a href="https://www.facebook.com/sharer/sharer.php?app_id=1645747765697865&amp;u=http://sibt.co/2nDEGjW"
     rel="nofollow"
     target="_blank"
     title="Share on Facebook">
    <i class="fa fa-facebook"></i>
  </a>
  <a href="http://www.linkedin.com/shareArticle?mini=true&amp;url=http://sibt.co/2mMOsmq&amp;title=How%20to%20Add%20Social%20Login%20to%20Django&amp;summary=In%20this%20tutorial%20we%20will%20implement%20Facebook,%20Twitter%20and%20GitHub%20authentication%20using%20the%20social-auth-app-django%20library.%20They%20support%20several%20other%20services%20and%20the%20process%20should%20be%20somewhat%20simil...&amp;source=https://simpleisbetterthancomplex.com"
     rel="nofollow"
     target="_blank"
     title="Share on LinkedIn">
    <i class="fa fa-linkedin"></i>
  </a>
</div>

  </div>
</div>

          </div>
          <!--div style="text-align:center;margin-bottom:20px">

            <a href="//namecheap.pxf.io/c/477033/408288/5618" target="_blank" rel="noopener nofollow">
              <img src="//a.impactradius-go.com/display-ad/5618-408288" border="0" alt="Search and buy domains from Namecheap. Lowest prices!" width="728" height="90" style="max-width:100%!important" />
            </a>
            <img height="0" width="0" src="//namecheap.pxf.io/i/477033/408288/5618" alt="Impact Radius" style="position:absolute;visibility:hidden;" border="0" />


            <a href="https://click.linksynergy.com/fs-bin/click?id=phY4769lVwA&offerid=467035.415&subid=0&type=4" target="_blank" rel="noopener nofollow">
              <img border="0" alt="Deep Learning Specialization on Coursera" src="https://ad.linksynergy.com/fs-bin/show?id=phY4769lVwA&bids=467035.415&subid=0&type=4&gridnum=16" style="max-width:100%!important">
            </a>

          </div-->

          <div class="card">
            
  <div id="comments">
    <div id="disqus_thread"></div>
    <script>
      var disqus_config = function () {
        this.page.url = 'how-to-add-social-login-to-django.html';
        this.page.identifier = '/tutorial/2016/10/24/how-to-add-social-login-to-django';
      };
      (function() {
      var d = document, s = d.createElement('script');
      s.src = 'http://simpleisbetterthancomplex.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
      })();
    </script>
    <script id="dsq-count-scr" src="http://simpleisbetterthancomplex.disqus.com/count.js" async></script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  </div>


          </div>
          <div class="card subscribe">
  <form action="https://colossus.simpleisbetterthancomplex.com/subscribe/d2320a41-0378-4aa8-8f4e-5bb1ffcd521d/" method="post" target="_blank" novalidate>
    <h4>
      <span class="fa fa-send" style="margin-right: 5px"></span> Subscribe to our Mailing List
    </h4>
    <h5>Receive updates from the Blog!</h5>
    <div class="row">
      <div class="eight columns">
        <input class="u-full-width" placeholder="Your email address" type="email" name="email">
      </div>
      <div class="four columns">
        <button type="submit" class="u-full-width">Subscribe</button>
      </div>
    </div>
  </form>
</div>

          <div class="card popular-posts">
  <h4>Popular Posts</h4>
  <div class="row">
    
      <div class="four columns">
        <a href="../../07/22/how-to-extend-django-user-model.html">
          <img src="../../../../media/2016-07-22-how-to-extend-django-user-model/featured-post-image.jpg" alt="How to Extend Django User Model" title="How to Extend Django User Model">
          How to Extend Django User Model
        </a>
      </div>
    
      <div class="four columns">
        <a href="../../05/11/how-to-setup-ssl-certificate-on-nginx-for-django-application.html">
          <img src="../../../../media/2016-05-11-how-to-setup-ssl-certificate-on-nginx-for-django-application/featured-post-image.jpg" alt="How to Setup a SSL Certificate on Nginx for a Django Application" title="How to Setup a SSL Certificate on Nginx for a Django Application">
          How to Setup a SSL Certificate on Nginx for a Django Application
        </a>
      </div>
    
      <div class="four columns">
        <a href="../14/how-to-deploy-to-digital-ocean.html">
          <img src="../../../../media/2016/10/featured-do.jpg" alt="How to Deploy a Django Application to Digital Ocean" title="How to Deploy a Django Application to Digital Ocean">
          How to Deploy a Django Application to Digital Ocean
        </a>
      </div>
    
  </div>
</div>

        </div>
      </div>
    </div>
  </main>
  <footer>
  <div class="container">
    <ul>
      <li>© 2015-2021 simple complex</li>
      <li><a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank">cc by-nc-sa 3.0</a></li>
      <li>//</li>
      <li><a href="../../../../about/index.html" rel="author">about</a></li>
      <li><a href="../../../../contact/index.html">contact</a></li>
      <li><a href="../../../../faq/index.html">faq</a></li>
      <li><a href="../../../../cookies/index.html">cookies</a></li>
      <li><a href="../../../../privacy/index.html">privacy policy</a></li>
    </ul>
  </div>
</footer>
<div class="overlay"></div>

  
  <script id="ga-page-views" src="../../../../js/page-views.js" async></script>
  <script src="http://z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=1d8c6a0f-2136-49ad-b0b3-0b09662b7e28"></script>


<style>
.related-posts .row {
  display: grid;
  grid-gap: 20px;
  grid-template-columns: repeat(3, 1fr);
}

.related-posts .four.columns {
  width: 100%;
}
</style>

<script>
_bsa.init('recommended', 'CK7I4KJJ', 'placement:simpleisbetterthancomplexcom',
    {
      target: '.related-posts .columns',
      template: `
<div class="four columns">
<a href="##link##" rel="noopener nofollow">
<img src="##smallImage##" alt="##title##" title="##title##">[Sponsored] ##title##</a>
</div>
      `
    }
  );
</script>

<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": "https://simpleisbetterthancomplex.com/tutorial/2016/10/24/how-to-add-social-login-to-django.html",
  "headline": "How to Add Social Login to Django",
  "image": {
    "@type": "ImageObject",
    "url": "https://simpleisbetterthancomplex.com/media/2016/10/featured-social.jpg",
    "height": 370,
    "width": 960
  },
  "datePublished": "2016-10-24T10:21:00+03:00",
  "dateModified": "2017-03-02T02:00:00+02:00",
  "author": {
    "@type": "Person",
    "name": "Vitor Freitas"
  },
   "publisher": {
    "@type": "Organization",
    "name": "Simple is Better Than Complex",
    "logo": {
      "@type": "ImageObject",
      "url": "https://simpleisbetterthancomplex.com/img/gplus_logo.png",
      "height": 60,
      "width": 600
    }
  },
  "description": "In this tutorial we will implement Facebook, Twitter and GitHub authentication using the social-auth-app-django library. They support several other services and the process should be somewhat simil..."
}
</script>

</body>

<!-- Mirrored from simpleisbetterthancomplex.com/tutorial/2016/10/24/how-to-add-social-login-to-django.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 03 Sep 2021 12:47:00 GMT -->
</html>
