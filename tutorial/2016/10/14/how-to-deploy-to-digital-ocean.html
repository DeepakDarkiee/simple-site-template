<!DOCTYPE html>
<html lang="en">

<!-- Mirrored from simpleisbetterthancomplex.com/tutorial/2016/10/14/how-to-deploy-to-digital-ocean.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 03 Sep 2021 12:37:48 GMT -->
<head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="ir-site-verification-token" value="-233745807">
<title>How to Deploy a Django Application to Digital Ocean</title>
<meta name="description" content="DigitalOcean is a Virtual Private Server (VPS) provider. In my opinion it’s a great service to get started. It’s cheapand very simple to setup. In this tutor...">
<link href="https://fonts.googleapis.com/css?family=Raleway:400,300,500,600,700" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="../../../../css/main71de.css?v=34">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="canonical" href="how-to-deploy-to-digital-ocean.html">
<link rel="alternate" type="application/rss+xml" title="Simple is Better Than Complex" href="../../../../feed.xml" />
<link rel="icon" type="image/png" href="../../../../favicon.png">
<link rel="mask-icon" href="../../../../safari-pinned-tab.svg" color="#5bbad5">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
<script src="../../../../js/site7b30.js?v=4"></script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-42049022-10', 'auto');
    ga('send', 'pageview');
  </script>
  <script>
    $(function () {
      $("#ad").on("click", "#carbonads .carbon-wrap a", function () {
        var page_id = 'how-to-deploy-to-digital-ocean.html';
        ga('send', 'event', 'carbonads', 'click', page_id, {
          'transport': 'beacon'
        });
      });
    });
  </script>
  <script>
  !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
  n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
  n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
  t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
  document,'script','https://connect.facebook.net/en_US/fbevents.js');
  fbq('init', '1689711451348257');
  fbq('track', 'PageView');
  </script>
  <noscript><img height="1" width="1" style="display:none" alt="PageView"
  src="https://www.facebook.com/tr?id=1689711451348257&amp;ev=PageView&amp;noscript=1"
  /></noscript>
  <script data-ad-client="ca-pub-5430683801108011" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


  <meta property="og:title" content="How to Deploy a Django Application to Digital Ocean">
<meta property="og:url" content="https://simpleisbetterthancomplex.com/tutorial/2016/10/14/how-to-deploy-to-digital-ocean.html">
<meta property="og:image" content="https://simpleisbetterthancomplex.com/media/2016/10/featured-do.jpg">
<meta property="og:description" content="DigitalOcean is a Virtual Private Server (VPS) provider. In my opinion it’s a great service to get started. It’s cheapand very simple to setup. In this tutor...">
<meta property="og:site_name" content="Simple is Better Than Complex">
<meta property="og:locale" content="en_US">

  <meta property="article:published_time" content="2016-10-14T12:35:00+03:00">
  <meta property="article:author" content="https://facebook.com/vitorfs">

<meta property="fb:admins" content="100000024295617">
<meta property="fb:app_id" content="1645747765697865">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="vitorfs">
<meta name="twitter:creator" content="vitorfs">
<meta name="twitter:title" content="How to Deploy a Django Application to Digital Ocean">
<meta name="twitter:description" content="DigitalOcean is a Virtual Private Server (VPS) provider. In my opinion it’s a great service to get started. It’s cheapand very simple to setup. In this tutorial I will guide you through the steps I...">
<meta name="twitter:image" content="https://simpleisbetterthancomplex.com/media/2016/10/featured-do.jpg">
<meta name="p:domain_verify" content="e262845cb18e4c68b0cff535a0eaea5d">
  <meta property="og:type" content="article">
  
    <meta property="article:tag" content="django">
  
    <meta property="article:tag" content="deployment">
  
    <meta property="article:tag" content="digitalocean">
  
  <style type="text/css">
    @media (min-width: 750px) {
      body {
        /*padding-top:50px!important;*/
      }
    }
  </style>
  <script src="http://m.servedby-buysellads.com/monetization.js"></script>
</head>
<body>
  <div id="top" style="visibility: hidden"></div>
<header>
  <div class="container">
    <ul class="menu menu-right">
      <li class="menu-item">
        <a href="../../../../search/index.html">
          <span class="fa fa-search"></span>
        </a>
      </li>
      <li class="toggle-menu">
        <a href="javascript:void(0);">
          <span class="fa fa-bars"></span>
        </a>
      </li>
    </ul>
    <ul class="menu menu-left">
      <li class="logo">
        <a href="../../../../index.html" style="font-weight: 900">simple<span class="brand">is</span>better<span class="brand">than</span>complex</a>
      </li>
      <li class="menu-item">
        <a href="../../../../index.html">
          <span class="fa fa-home" style="margin-right: 3px"></span>
          Home
        </a>
      </li>
      <li class="menu-item">
        <a href="../../../../archive/index.html">
          <span class="fa fa-archive" style="margin-right: 3px"></span>
          Articles
        </a>
      </li>
      <li class="menu-item">
        <a href="../../../../videos/index.html">
          <span class="fa fa-video-camera" style="margin-right: 3px"></span>
          Videos
        </a>
      </li>
      <li class="menu-item">
        <a href="../../../../series/index.html">
          <span class="fa fa-book" style="margin-right: 3px"></span>
          Series
        </a>
      </li>
      <li class="menu-item">
        <a href="../../../../snippets/index.html">
          <span class="fa fa-code" style="margin-right: 3px"></span>
          Snippets
        </a>
      </li>
      <li class="menu-item">
        <a href="../../../../sponsor/index.html">
          <span class="fa fa-bullhorn" style="margin-right: 3px"></span>
          Sponsor
        </a>
      </li>
      <li class="menu-item">
        <a href="../../../../feed.xml" target="_blank">
          <span class="fa fa-rss" style="margin-right: 3px"></span>
          RSS
        </a>
      </li>
      <li class="menu-item">
        <a href="https://colossus.simpleisbetterthancomplex.com/subscribe/d2320a41-0378-4aa8-8f4e-5bb1ffcd521d/" class="brand" target="_blank">
          <span class="fa fa-send" style="margin-right: 3px"></span> Subscribe
        </a>
      </li>
      <li class="menu-item hidden-mobile">
        <a href="../../../../search/index.html">
          <span class="fa fa-search"></span> Search
        </a>
      </li>
    </ul>
  </div>
</header>

  <!--p style="text-align:center;font-size:1.4rem;margin-top:2rem;margin-bottom:2rem;">
    <span style="background-color:#1eaedb;color:#fff;border-radius:3px;padding:3px 5px;font-size:1.2rem;margin-right:5px;">Sponsored</span>
    <a href="/sponsor/" rel="noopener nofollow">
      By You? Learn more about sponsorship of the blog.
    </a>
  </p-->

  <main>
    <div class="container">
      <div class="row">
        <div class="ten offset-by-one columns content post">
          <div class="card post-author">
  <div class="author-picture">
    <img src="../../../../img/picture.jpg" alt="Vitor Freitas">
  </div>
  <div class="author-info">
    <p class="name">By <strong>Vitor Freitas</strong></p>
    <a href="https://www.digitalocean.com/?refcode=074832454ff1&amp;utm_campaign=Referral_Invite&amp;utm_medium=Referral_Program&amp;utm_source=badge" class="powered-by-do">
      <img src="https://web-platforms.sfo2.cdn.digitaloceanspaces.com/WWW/Badge 1.svg" alt="DigitalOcean Referral Badge">
    </a>
    <p class="bio">
      I'm a passionate software developer and researcher. I write about Python, Django and Web Development on a weekly basis. <a href="../../../../about/index.html" rel="author">Read more</a>.
    </p>
    <p class="contact">
      <a href="https://www.youtube.com/VitorFreitas" rel="me noopener" target="_blank" title="YouTube"><i class="fa fa-youtube-play"></i></a>
      <a href="https://github.com/vitorfs" rel="me noopener" target="_blank" title="GitHub"><i class="fa fa-github"></i></a>
      <a href="https://twitter.com/vitorfs" rel="me noopener" target="_blank" title="Twitter"><i class="fa fa-twitter"></i></a>
      <a href="https://facebook.com/vitorfs" rel="me noopener" target="_blank" title="Facebook"><i class="fa fa-facebook-official"></i></a>
      <a href="https://linkedin.com/in/vitorfs" rel="me noopener" target="_blank" title="LinkedIn"><i class="fa fa-linkedin-square"></i></a>
      <a href="https://instagram.com/vitorfs" rel="me noopener" target="_blank" title="Instagram"><i class="fa fa-instagram"></i></a>
      <a href="../../../../contact/index.html" title="Contact"><i class="fa fa-envelope"></i></a>
    </p>
  </div>
  
  
  <div class="row">
    <div class="six columns">
      <div id="ad">
        <script async type="text/javascript" src="http://cdn.carbonads.com/carbon.js?serve=CKYIEKQM&amp;placement=simpleisbetterthancomplexcom" id="_carbonads_js"></script>
      </div>
    </div>


    <!--div class="six columns">
      <div id="ad2">
        <div id="sponsored">
          <a href="/sponsor/">
            <img src="/media/sponsored/ad.png" alt="Advertise Here">
            <span>Reach 90k+ Django developers every month. Learn more about sponsorship of the blog.</span>
          </a>
          <small>
            <a href="/sponsor/">Sponsored</a>
          </small>
        </div>

        <div id="sponsored">
          <a href="https://click.linksynergy.com/link?id=phY4769lVwA&offerid=507388.567828&type=2&murl=https%3A%2F%2Fwww.udemy.com%2Fcomplete-python-bootcamp%2F" target="_blank" rel="noopener nofollow">
            <img border="0" src="https://udemy-images.udemy.com/course/480x270/567828_67d0.jpg" alt="Complete Python Bootcamp: Go from zero to hero in Python 3">
            <span>Complete Python Bootcamp: Go from zero to hero in Python 3</span>
          </a>
          <small>
            <a href="/sponsor/">Sponsored</a>
          </small>
          <img border="0" width="1" height="1" src="https://ad.linksynergy.com/fs-bin/show?id=phY4769lVwA&bids=507388.567828&type=2&subid=0" alt="LinkSynergy">
        </div>

      </div>
    </div-->


  </div>
  
</div>


          <p style="text-align:center;font-size:1.4rem;margin-bottom:4rem;">
            <i class="fa fa-youtube-play" style="color:#ff0000!important;"></i> <a href="https://www.youtube.com/VitorFreitas?sub_confirmation=1" target="_blank">Subscribe to our YouTube Channel!</a>
            <br>
            <a href="https://youtu.be/Udf4VbtM92Y" target="_blank">[Jul 12, 2021] New Video: How to Use Django Rest Framework Permissions (DRF Tutorial - Part 7)</a>
          </p>

          <div class="card">
            
  <h5 class="post-category">
    
      tutorial
    
  </h5>
  <hr class="dashed">

<h3 class="post-title">How to Deploy a Django Application to Digital Ocean</h3>
<ul class="post-meta">
  <li>
    <i class="fa fa-calendar"></i> Oct 14, 2016
  </li>
  <li>
    <i class="fa fa-clock-o"></i>
    10 minutes read
  </li>
  <li>
    <i class="fa fa-comments"></i>
    <a href="#disqus_thread" data-disqus-identifier="/tutorial/2016/10/14/how-to-deploy-to-digital-ocean">comments</a>
  </li>
  <li>
    <i class="fa fa-eye"></i>
    <span class="ga-page-views" data-ga-identifier="how-to-deploy-to-digital-ocean.html"></span> views
  </li>
  
  
</ul>

  <div class="post-featured-image">
    <img src="../../../../media/2016/10/featured-do.jpg" alt="How to Deploy a Django Application to Digital Ocean" class="featured-image">
    
      <small>(Picture: <a href="https://www.pexels.com/photo/aerospace-engineering-exploration-launch-34521/" target="_blank">https://www.pexels.com/photo/aerospace-engineering-exploration-launch-34521/</a>)</small>
    
  </div>


            <article>
              <p>DigitalOcean is a Virtual Private Server (VPS) provider. In my opinion it’s a great service to get started. It’s cheap
and very simple to setup. In this tutorial I will guide you through the steps I go to deploy a Django application
using Ubuntu 16.04, Git, PostgreSQL, NGINX, Supervisor and Gunicorn.</p>

<p>In this tutorial we will be deploying the following Django application: <a href="https://github.com/sibtc/urban-train">github.com/sibtc/urban-train</a></p>

<p>It’s just an empty Django project I created to illustrate the deployment process. If you are wondering about the name,
it is the repository name suggestion GitHub gave.</p>

<p>If you don’t have a DigitalOcean account yet, you can sign up using the link below and get $10 credit to get started:</p>

<p><a href="https://m.do.co/c/074832454ff1" target="_blank" rel="nofollow">Get $10 free credit on DigitalOcean.</a> (Disclaimer: this is referral link, meaning you and me get credit.)</p>

<p>Anyway! Let’s get started.</p>

<hr />

<h4 id="create-a-new-droplet">Create a New Droplet</h4>

<p>Pick the <strong>Ubuntu 16.04.1</strong> distribution:</p>

<p><img src="../../../../media/2016/10/do1.png" alt="Digital Ocean" /></p>

<p>Select the size of the Droplet (cloud server):</p>

<p><img src="../../../../media/2016/10/do2.png" alt="Digital Ocean" /></p>

<p>Select the region you want to deploy:</p>

<p><img src="../../../../media/2016/10/do3.png" alt="Digital Ocean" /></p>

<p>Finally pick a name for the Droplet:</p>

<p><img src="../../../../media/2016/10/do4.png" alt="Digital Ocean" /></p>

<p>And click on <strong>Create</strong>. After that you will see the recently created droplet in your profile:</p>

<p><img src="../../../../media/2016/10/do5.png" alt="Digital Ocean" /></p>

<p>You will receive the root password via email. Now pick the <strong>IP Address</strong> and ssh into the server:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">ssh root@107.170.28.172</code></pre></figure>

<p><img src="../../../../media/2016/10/ssh.png" alt="SSH" /></p>

<p>You will be asked to change the root password upon the first login.</p>

<p>If you are using a Unix-like operating system you can use the terminal. If you are on Windows, you can perhaps download
<a href="http://www.putty.org/" target="_blank">PuTTY</a>.</p>

<p>Also if you prefer, you can use the Digital Ocean’s console:</p>

<p><img src="../../../../media/2016/10/do-console.png" alt="Digital Ocean Console" /></p>

<hr />

<h4 id="installing-the-server-dependencies">Installing the Server Dependencies</h4>

<p>First thing let’s upgrade the packages:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">sudo apt-get update
sudo apt-get -y upgrade</code></pre></figure>

<h5 id="postgresql">PostgreSQL</h5>

<p>Install the dependencies to use PostgreSQL with Python/Django:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">sudo apt-get -y install build-essential libpq-dev python-dev</code></pre></figure>

<p>Install the PostgreSQL Server:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">sudo apt-get -y install postgresql postgresql-contrib</code></pre></figure>

<h5 id="nginx">NGINX</h5>

<p>Install NGINX, which will be used to serve static assets (css, js, images) and also to run the Django application
behind a proxy server:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">sudo apt-get -y install nginx</code></pre></figure>

<h5 id="supervisor">Supervisor</h5>

<p>Supervisor will start the application server and manage it in case of server crash or restart:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">sudo apt-get -y install supervisor</code></pre></figure>

<p>Enable and start the Supervisor:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">sudo systemctl <span class="nb">enable </span>supervisor
sudo systemctl start supervisor</code></pre></figure>

<h5 id="python-virtualenv">Python Virtualenv</h5>

<p>The Django application will be deployed inside a Python Virtualenv, for a better requirements management:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">sudo apt-get -y install python-virtualenv</code></pre></figure>

<hr />

<h4 id="configure-postgresql-database">Configure PostgreSQL Database</h4>

<p>Switch users:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">su - postgres</code></pre></figure>

<p>Create a database user and the application database:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">createuser u_urban
createdb urban_prod --owner u_urban
psql -c <span class="s2">"ALTER USER u_urban WITH PASSWORD '123'"</span></code></pre></figure>

<p>PS: Make sure to pick a secure password! I’m using <strong>123</strong> for simplicity sake.</p>

<p>We can now go back to the root user, simply exit:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">exit</span></code></pre></figure>

<hr />

<h4 id="configure-the-application-user">Configure The Application User</h4>

<p>Create a new user with the command below:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">adduser urban</code></pre></figure>

<p>Usually I just use the application name. You will be asked a few questions. Sample of the output below:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">Adding user `urban' ...
Adding new group `urban' (1000) ...
Adding new user `urban' (1000) with group `urban' ...
Creating home directory `/home/urban' ...
Copying files from `/etc/skel' ...
Enter new UNIX password:
Retype new UNIX password:
passwd: password updated successfully
Changing the user information for urban
Enter the new value, or press ENTER for the default
  Full Name []:
  Room Number []:
  Work Phone []:
  Home Phone []:
  Other []:
Is the information correct? [Y/n]</code></pre></figure>

<p>Add the user to the list of sudoers:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">gpasswd -a urban sudo</code></pre></figure>

<p>Switch to the recently created user:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">su - urban</code></pre></figure>

<hr />

<h4 id="configure-the-python-virtualenv">Configure the Python Virtualenv</h4>

<p>At this point we are logged in with the <strong>urban</strong> user (or whatever named you selected). We will install our Django
application in this user’s home directory <code class="highlighter-rouge">/home/urban</code>:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">virtualenv .</code></pre></figure>

<p>Activate it:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">source </span>bin/activate</code></pre></figure>

<p>Clone the repository:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">git clone https://github.com/sibtc/urban-train.git</code></pre></figure>

<p>This is how the <code class="highlighter-rouge">/home/urban</code> directory should look like at the moment:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">urban/
 |-- bin/
 |-- urban-train/  &lt;-- Django App (Git Repository)
 |-- include/
 |-- lib/
 |-- local/
 |-- pip-selfcheck.json
 +-- share/</code></pre></figure>

<p>First open the <strong>urban-train</strong> directory:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">cd </span>urban-train</code></pre></figure>

<p>Install the project’s dependencies:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">pip install -r requirements.txt</code></pre></figure>

<p>At this point you will need to set the database credentials in the <strong>settings.py</strong> file:</p>

<p><strong>settings.py</strong></p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'default'</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">'ENGINE'</span><span class="p">:</span> <span class="s">'django.db.backends.postgresql_psycopg2'</span><span class="p">,</span>
        <span class="s">'NAME'</span><span class="p">:</span> <span class="s">'urban_prod'</span><span class="p">,</span>
        <span class="s">'USER'</span><span class="p">:</span> <span class="s">'u_urban'</span><span class="p">,</span>
        <span class="s">'PASSWORD'</span><span class="p">:</span> <span class="s">'123'</span><span class="p">,</span>
        <span class="s">'HOST'</span><span class="p">:</span> <span class="s">'localhost'</span><span class="p">,</span>
        <span class="s">'PORT'</span><span class="p">:</span> <span class="s">''</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>PS: There are better and secure ways to handle SECRET_KEY, database credentials etc. I’m editing it directly in the
settings.py file for the sake of simplicity. The focus of this tutorial is on the deployment process itself.</p>

<p>Migrate the database:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">python manage.py migrate</code></pre></figure>

<p>Collect the static files:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">python manage.py collectstatic</code></pre></figure>

<p>Test if everything is okay:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">python manage.py runserver 0.0.0.0:8000</code></pre></figure>

<p>Access the IP Address of your server using port 8000. In my case, <strong>107.170.28.172:8000</strong>.</p>

<p><img src="../../../../media/2016/10/urban-train.png" alt="Test Deployment" /></p>

<p>This is just a test. We won’t be using the <code class="highlighter-rouge">runserver</code> to run our application. We will be using a proper application
server to securely serve our application.</p>

<p>Hit <code class="highlighter-rouge">CONTROL-C</code> to quit the development server and let’s keep moving forward.</p>

<hr />

<h4 id="configure-gunicorn">Configure Gunicorn</h4>

<p>First install <strong>Gunicorn</strong> inside the virtualenv:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">pip install gunicorn</code></pre></figure>

<p>Create a file named <strong>gunicorn_start</strong> inside the <strong>bin/</strong> folder:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">vim bin/gunicorn_start</code></pre></figure>

<p>And add the following information and save it:</p>

<p><strong>/home/urban/bin/gunicorn_start</strong></p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">#!/bin/bash

NAME="urban_train"
DIR=/home/urban/urban-train
USER=urban
GROUP=urban
WORKERS=3
BIND=unix:/home/urban/run/gunicorn.sock
DJANGO_SETTINGS_MODULE=urban_train.settings
DJANGO_WSGI_MODULE=urban_train.wsgi
LOG_LEVEL=error

cd $DIR
source ../bin/activate

export DJANGO_SETTINGS_MODULE=$DJANGO_SETTINGS_MODULE
export PYTHONPATH=$DIR:$PYTHONPATH

exec ../bin/gunicorn ${DJANGO_WSGI_MODULE}:application \
  --name $NAME \
  --workers $WORKERS \
  --user=$USER \
  --group=$GROUP \
  --bind=$BIND \
  --log-level=$LOG_LEVEL \
  --log-file=-</code></pre></figure>

<p>Make the <strong>gunicorn_start</strong> file is executable:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">chmod u+x bin/gunicorn_start</code></pre></figure>

<p>Create a directory named <strong>run</strong>, for the unix socket file:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">mkdir run</code></pre></figure>

<hr />

<h4 id="configure-supervisor">Configure Supervisor</h4>

<p>Now what we want to do is configure <strong>Supervisor</strong> to take care of running the gunicorn server.</p>

<p>First let’s create a folder named <strong>logs</strong> inside the virtualenv:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">mkdir logs</code></pre></figure>

<p>Create a file to be used to log the application errors:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">touch logs/gunicorn-error.log</code></pre></figure>

<p>Create a new Supervisor configuration file:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">sudo vim /etc/supervisor/conf.d/urban-train.conf</code></pre></figure>

<p><strong>/etc/supervisor/conf.d/urban-train.conf</strong></p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">[program:urban-train]
command=/home/urban/bin/gunicorn_start
user=urban
autostart=true
autorestart=true
redirect_stderr=true
stdout_logfile=/home/urban/logs/gunicorn-error.log</code></pre></figure>

<p>Reread Supervisor configuration files and make the new program available:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">sudo supervisorctl reread
sudo supervisorctl update</code></pre></figure>

<p>Check the status:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">sudo supervisorctl status urban-train
urban-train                      RUNNING   pid 23381, uptime 0:00:15</code></pre></figure>

<p>Now you can control your application using Supervisor. If you want to update the source code of your application
with a new version, you can pull the code from GitHub and then restart the process:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">sudo supervisorctl restart urban-train</code></pre></figure>

<p>Where <code class="highlighter-rouge">urban-train</code> will be the name of your application.</p>

<hr />

<h4 id="configure-nginx">Configure NGINX</h4>

<p>Add a new configuration file named <strong>urban</strong> inside <strong>/etc/nginx/sites-available/</strong>:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">sudo vim /etc/nginx/sites-available/urban-train</code></pre></figure>

<p><strong>/etc/nginx/sites-available/urban-train</strong></p>

<figure class="highlight"><pre><code class="language-nginx" data-lang="nginx"><span class="k">upstream</span> <span class="s">app_server</span> <span class="p">{</span>
    <span class="kn">server</span> <span class="s">unix:/home/urban/run/gunicorn.sock</span> <span class="s">fail_timeout=0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">server</span> <span class="p">{</span>
    <span class="kn">listen</span> <span class="mi">80</span><span class="p">;</span>

    <span class="c1"># add here the ip address of your server
</span>    <span class="c1"># or a domain pointing to that ip (like example.com or www.example.com)
</span>    <span class="kn">server_name</span> <span class="mi">107</span><span class="s">.170.28.172</span><span class="p">;</span>

    <span class="kn">keepalive_timeout</span> <span class="mi">5</span><span class="p">;</span>
    <span class="kn">client_max_body_size</span> <span class="mi">4G</span><span class="p">;</span>

    <span class="kn">access_log</span> <span class="n">/home/urban/logs/nginx-access.log</span><span class="p">;</span>
    <span class="kn">error_log</span> <span class="n">/home/urban/logs/nginx-error.log</span><span class="p">;</span>

    <span class="kn">location</span> <span class="n">/static/</span> <span class="p">{</span>
        <span class="kn">alias</span> <span class="n">/home/urban/static/</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1"># checks for static file, if not found proxy to app
</span>    <span class="kn">location</span> <span class="n">/</span> <span class="p">{</span>
        <span class="kn">try_files</span> <span class="nv">$uri</span> <span class="s">@proxy_to_app</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kn">location</span> <span class="s">@proxy_to_app</span> <span class="p">{</span>
      <span class="kn">proxy_set_header</span> <span class="s">X-Forwarded-For</span> <span class="nv">$proxy_add_x_forwarded_for</span><span class="p">;</span>
      <span class="kn">proxy_set_header</span> <span class="s">Host</span> <span class="nv">$http_host</span><span class="p">;</span>
      <span class="kn">proxy_redirect</span> <span class="no">off</span><span class="p">;</span>
      <span class="kn">proxy_pass</span> <span class="s">http://app_server</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>Create a symbolic link to the <strong>sites-enabled</strong> dir:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">sudo ln -s /etc/nginx/sites-available/urban-train /etc/nginx/sites-enabled/urban-train</code></pre></figure>

<p>Remove NGINX default website:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">sudo rm /etc/nginx/sites-enabled/default</code></pre></figure>

<p>Restart NGINX:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">sudo service nginx restart</code></pre></figure>

<hr />

<h4 id="the-final-test">The Final Test</h4>

<p>Alright! At this point your application should be up and running! Open the web browser and access it:</p>

<p><img src="../../../../media/2016/10/urban-train-admin.png" alt="Urban Train Deployed" /></p>

<p>A final test I like to run is rebooting the machine and see if everything restarts automatically:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">sudo reboot</code></pre></figure>

<p>Wait a few seconds. Access the website via browser. If it loads normally, means everything is working as expected!
All the process are starting automatically.</p>

<hr />

<h4 id="updating-the-application">Updating the Application</h4>

<p>Usually that’s the process you will follow when you want to update your Django application:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">ssh urban@107.170.28.172

<span class="nb">source </span>bin/activate
<span class="nb">cd </span>urban-train
git pull origin master
python manage.py collectstatic
python manage.py migrate
sudo supervisorctl restart urban-train
<span class="nb">exit</span></code></pre></figure>

<hr />

<h4 id="caveats">Caveats</h4>

<p>I just wanted to take you through the basic steps of a deployment using Digital Ocean. Actually, for the most part
the basic steps will be the same for pretty much every cloud provider.</p>

<p>Please note that there are lots of details regarding security, performance, how you should manage the sensitive data
of your application, SSL certificate installation and so on.</p>

<p>I highly recommend reading all the available documentation about deployment on the official Django Docs. Also it’s
very important to learn about the tooling you are using. Gunicorn, NGINX, Ubuntu, Supervisor, etc.</p>

<p>Further reading:</p>

<ul>
  <li><a href="https://docs.djangoproject.com/en/1.10/howto/deployment/checklist/" target="_blank">Django Docs: Deployment checklist</a></li>
  <li><a href="http://docs.gunicorn.org/en/latest/deploy.html" target="_blank">Deploying Gunicorn</a></li>
  <li><a href="https://www.nginx.com/resources/wiki/start/topics/tutorials/config_pitfalls/" target="_blank">NGINX Pitfalls and Common Mistakes</a></li>
  <li><a href="https://www.digitalocean.com/community/tutorials/initial-server-setup-with-ubuntu-14-04" target="_blank">Initial Server Setup, Root Login, etc</a></li>
  <li><a href="../../05/11/how-to-setup-ssl-certificate-on-nginx-for-django-application.html" target="_blank">How to Setup a SSL Certificate on Nginx for a Django Application</a></li>
  <li><a href="../../../../2015/11/26/package-of-the-week-python-decouple.html" target="_blank">Separating settings from code (database information, security key, allowed hosts, etc)</a></li>
</ul>

<p>I hope you enjoyed this tutorial! If you have any question, please leave a comment below!</p>

<hr />

<h4 id="referral-link">Referral Link</h4>

<p><a href="https://m.do.co/c/074832454ff1" target="_blank" rel="nofollow">DigitalOcean $10 free credit to get started.</a></p>

<p>Even though I’m sharing a referral link, I truly recommend their service (this blog itself is hosted there) and I have
several Django applications deployed on DigitalOcean. I find it very inexpensive and ridiculously easy to setup.</p>

            </article>
            
            <hr>
            <div class="popular-posts related-posts">
  <h4>Related Posts</h4>
    <div class="row">
      <div class="four columns">
<a href="../../../../series/2017/10/16/a-complete-beginners-guide-to-django-part-7.html">
<img src="../../../../media/series/beginners-guide/1.11/part-7/featured.jpg" alt="A Complete Beginner's Guide to Django - Part 7" title="A Complete Beginner's Guide to Django - Part 7">
A Complete Beginner's Guide to Django - Part 7
</a>
</div>
<div class="four columns">
<a href="../../../2017/05/23/how-to-deploy-a-django-application-on-rhel.html">
<img src="../../../../media/2017/05/featured-rhel.jpg" alt="How to Deploy a Django Application on RHEL 7" title="How to Deploy a Django Application on RHEL 7">
How to Deploy a Django Application on RHEL 7
</a>
</div>
<div class="four columns">
<a href="../../08/09/how-to-deploy-django-applications-on-heroku.html">
<img src="../../../../media/2016-08-09-how-to-deploy-django-applications-on-heroku/featured.jpg" alt="How to Deploy Django Applications on Heroku" title="How to Deploy Django Applications on Heroku">
How to Deploy Django Applications on Heroku
</a>
</div>
    </div>
</div>


            <hr class="dashed">
<div class="row">
  <div class="six columns post-tags" style="padding-top: 4px">
    
      <a href="../../../../tag/django/index.html"><span class="tag">django</span></a>
    
      <a href="../../../../tag/deployment/index.html"><span class="tag">deployment</span></a>
    
      <a href="../../../../tag/digitalocean/index.html"><span class="tag">digitalocean</span></a>
    
  </div>
  <div class="six columns post-share">
    <div class="social">
  Share this post
  <a href="http://vk.com/share.php?url=http://sibt.co/2mw5kdH"
     rel="nofollow"
     target="_blank"
     title="Share on VK">
    <i class="fa fa-vk"></i>
  </a>
  <a href="https://twitter.com/intent/tweet?text=How%20to%20Deploy%20a%20Django%20Application%20to%20Digital%20Ocean&amp;url=http://sibt.co/2ndO6Gv&amp;via=vitorfs&amp;related=vitorfs"
     rel="nofollow"
     target="_blank"
     title="Share on Twitter">
    <i class="fa fa-twitter"></i>
  </a>
  <a href="https://www.facebook.com/sharer/sharer.php?app_id=1645747765697865&amp;u=http://sibt.co/2nINghq"
     rel="nofollow"
     target="_blank"
     title="Share on Facebook">
    <i class="fa fa-facebook"></i>
  </a>
  <a href="http://www.linkedin.com/shareArticle?mini=true&amp;url=http://sibt.co/2mwbRFj&amp;title=How%20to%20Deploy%20a%20Django%20Application%20to%20Digital%20Ocean&amp;summary=DigitalOcean%20is%20a%20Virtual%20Private%20Server%20(VPS)%20provider.%20In%20my%20opinion%20it%E2%80%99s%20a%20great%20service%20to%20get%20started.%20It%E2%80%99s%20cheapand%20very%20simple%20to%20setup.%20In%20this%20tutorial%20I%20will%20guide%20you%20through%20the%20steps%20I...&amp;source=https://simpleisbetterthancomplex.com"
     rel="nofollow"
     target="_blank"
     title="Share on LinkedIn">
    <i class="fa fa-linkedin"></i>
  </a>
</div>

  </div>
</div>

          </div>
          <!--div style="text-align:center;margin-bottom:20px">

            <a href="//namecheap.pxf.io/c/477033/408288/5618" target="_blank" rel="noopener nofollow">
              <img src="//a.impactradius-go.com/display-ad/5618-408288" border="0" alt="Search and buy domains from Namecheap. Lowest prices!" width="728" height="90" style="max-width:100%!important" />
            </a>
            <img height="0" width="0" src="//namecheap.pxf.io/i/477033/408288/5618" alt="Impact Radius" style="position:absolute;visibility:hidden;" border="0" />


            <a href="https://click.linksynergy.com/fs-bin/click?id=phY4769lVwA&offerid=467035.415&subid=0&type=4" target="_blank" rel="noopener nofollow">
              <img border="0" alt="Deep Learning Specialization on Coursera" src="https://ad.linksynergy.com/fs-bin/show?id=phY4769lVwA&bids=467035.415&subid=0&type=4&gridnum=16" style="max-width:100%!important">
            </a>

          </div-->

          <div class="card">
            
  <div id="comments">
    <div id="disqus_thread"></div>
    <script>
      var disqus_config = function () {
        this.page.url = 'how-to-deploy-to-digital-ocean.html';
        this.page.identifier = '/tutorial/2016/10/14/how-to-deploy-to-digital-ocean';
      };
      (function() {
      var d = document, s = d.createElement('script');
      s.src = 'http://simpleisbetterthancomplex.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
      })();
    </script>
    <script id="dsq-count-scr" src="http://simpleisbetterthancomplex.disqus.com/count.js" async></script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  </div>


          </div>
          <div class="card subscribe">
  <form action="https://colossus.simpleisbetterthancomplex.com/subscribe/d2320a41-0378-4aa8-8f4e-5bb1ffcd521d/" method="post" target="_blank" novalidate>
    <h4>
      <span class="fa fa-send" style="margin-right: 5px"></span> Subscribe to our Mailing List
    </h4>
    <h5>Receive updates from the Blog!</h5>
    <div class="row">
      <div class="eight columns">
        <input class="u-full-width" placeholder="Your email address" type="email" name="email">
      </div>
      <div class="four columns">
        <button type="submit" class="u-full-width">Subscribe</button>
      </div>
    </div>
  </form>
</div>

          <div class="card popular-posts">
  <h4>Popular Posts</h4>
  <div class="row">
    
      <div class="four columns">
        <a href="../../07/22/how-to-extend-django-user-model.html">
          <img src="../../../../media/2016-07-22-how-to-extend-django-user-model/featured-post-image.jpg" alt="How to Extend Django User Model" title="How to Extend Django User Model">
          How to Extend Django User Model
        </a>
      </div>
    
      <div class="four columns">
        <a href="../../05/11/how-to-setup-ssl-certificate-on-nginx-for-django-application.html">
          <img src="../../../../media/2016-05-11-how-to-setup-ssl-certificate-on-nginx-for-django-application/featured-post-image.jpg" alt="How to Setup a SSL Certificate on Nginx for a Django Application" title="How to Setup a SSL Certificate on Nginx for a Django Application">
          How to Setup a SSL Certificate on Nginx for a Django Application
        </a>
      </div>
    
      <div class="four columns">
        <a href="how-to-deploy-to-digital-ocean.html">
          <img src="../../../../media/2016/10/featured-do.jpg" alt="How to Deploy a Django Application to Digital Ocean" title="How to Deploy a Django Application to Digital Ocean">
          How to Deploy a Django Application to Digital Ocean
        </a>
      </div>
    
  </div>
</div>

        </div>
      </div>
    </div>
  </main>
  <footer>
  <div class="container">
    <ul>
      <li>© 2015-2021 simple complex</li>
      <li><a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank">cc by-nc-sa 3.0</a></li>
      <li>//</li>
      <li><a href="../../../../about/index.html" rel="author">about</a></li>
      <li><a href="../../../../contact/index.html">contact</a></li>
      <li><a href="../../../../faq/index.html">faq</a></li>
      <li><a href="../../../../cookies/index.html">cookies</a></li>
      <li><a href="../../../../privacy/index.html">privacy policy</a></li>
    </ul>
  </div>
</footer>
<div class="overlay"></div>

  
  <script id="ga-page-views" src="../../../../js/page-views.js" async></script>
  <script src="http://z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=1d8c6a0f-2136-49ad-b0b3-0b09662b7e28"></script>


<style>
.related-posts .row {
  display: grid;
  grid-gap: 20px;
  grid-template-columns: repeat(3, 1fr);
}

.related-posts .four.columns {
  width: 100%;
}
</style>

<script>
_bsa.init('recommended', 'CK7I4KJJ', 'placement:simpleisbetterthancomplexcom',
    {
      target: '.related-posts .columns',
      template: `
<div class="four columns">
<a href="##link##" rel="noopener nofollow">
<img src="##smallImage##" alt="##title##" title="##title##">[Sponsored] ##title##</a>
</div>
      `
    }
  );
</script>

<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": "https://simpleisbetterthancomplex.com/tutorial/2016/10/14/how-to-deploy-to-digital-ocean.html",
  "headline": "How to Deploy a Django Application to Digital Ocean",
  "image": {
    "@type": "ImageObject",
    "url": "https://simpleisbetterthancomplex.com/media/2016/10/featured-do.jpg",
    "height": 370,
    "width": 960
  },
  "datePublished": "2016-10-14T12:35:00+03:00",
  "dateModified": "2016-10-14T12:35:00+03:00",
  "author": {
    "@type": "Person",
    "name": "Vitor Freitas"
  },
   "publisher": {
    "@type": "Organization",
    "name": "Simple is Better Than Complex",
    "logo": {
      "@type": "ImageObject",
      "url": "https://simpleisbetterthancomplex.com/img/gplus_logo.png",
      "height": 60,
      "width": 600
    }
  },
  "description": "DigitalOcean is a Virtual Private Server (VPS) provider. In my opinion it’s a great service to get started. It’s cheapand very simple to setup. In this tutorial I will guide you through the steps I..."
}
</script>

</body>

<!-- Mirrored from simpleisbetterthancomplex.com/tutorial/2016/10/14/how-to-deploy-to-digital-ocean.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 03 Sep 2021 12:37:59 GMT -->
</html>
