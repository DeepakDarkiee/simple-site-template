<!DOCTYPE html>
<html lang="en">

<!-- Mirrored from simpleisbetterthancomplex.com/tutorial/2018/04/03/how-to-integrate-highcharts-js-with-django.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 03 Sep 2021 12:44:11 GMT -->
<head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="ir-site-verification-token" value="-233745807">
<title>How to Integrate Highcharts.js with Django</title>
<meta name="description" content="Highcharts is, in my opinion, one of the best JavaScript libraries to work with data visualization and charts outthere. Even though Highcharts is open source...">
<link href="https://fonts.googleapis.com/css?family=Raleway:400,300,500,600,700" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="../../../../css/main71de.css?v=34">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="canonical" href="how-to-integrate-highcharts-js-with-django.html">
<link rel="alternate" type="application/rss+xml" title="Simple is Better Than Complex" href="../../../../feed.xml" />
<link rel="icon" type="image/png" href="../../../../favicon.png">
<link rel="mask-icon" href="../../../../safari-pinned-tab.svg" color="#5bbad5">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
<script src="../../../../js/site7b30.js?v=4"></script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-42049022-10', 'auto');
    ga('send', 'pageview');
  </script>
  <script>
    $(function () {
      $("#ad").on("click", "#carbonads .carbon-wrap a", function () {
        var page_id = 'how-to-integrate-highcharts-js-with-django.html';
        ga('send', 'event', 'carbonads', 'click', page_id, {
          'transport': 'beacon'
        });
      });
    });
  </script>
  <script>
  !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
  n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
  n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
  t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
  document,'script','https://connect.facebook.net/en_US/fbevents.js');
  fbq('init', '1689711451348257');
  fbq('track', 'PageView');
  </script>
  <noscript><img height="1" width="1" style="display:none" alt="PageView"
  src="https://www.facebook.com/tr?id=1689711451348257&amp;ev=PageView&amp;noscript=1"
  /></noscript>
  <script data-ad-client="ca-pub-5430683801108011" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


  <meta property="og:title" content="How to Integrate Highcharts.js with Django">
<meta property="og:url" content="https://simpleisbetterthancomplex.com/tutorial/2018/04/03/how-to-integrate-highcharts-js-with-django.html">
<meta property="og:image" content="https://simpleisbetterthancomplex.com/media/2018/04/thumbnail-highcharts.jpg">
<meta property="og:description" content="Highcharts is, in my opinion, one of the best JavaScript libraries to work with data visualization and charts outthere. Even though Highcharts is open source...">
<meta property="og:site_name" content="Simple is Better Than Complex">
<meta property="og:locale" content="en_US">

  <meta property="article:published_time" content="2018-04-03T13:00:00+03:00">
  <meta property="article:author" content="https://facebook.com/vitorfs">

<meta property="fb:admins" content="100000024295617">
<meta property="fb:app_id" content="1645747765697865">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="vitorfs">
<meta name="twitter:creator" content="vitorfs">
<meta name="twitter:title" content="How to Integrate Highcharts.js with Django">
<meta name="twitter:description" content="Highcharts is, in my opinion, one of the best JavaScript libraries to work with data visualization and charts outthere. Even though Highcharts is open source, it’s a commercial library. It’s free f...">
<meta name="twitter:image" content="https://simpleisbetterthancomplex.com/media/2018/04/thumbnail-highcharts.jpg">
<meta name="p:domain_verify" content="e262845cb18e4c68b0cff535a0eaea5d">
  <meta property="og:type" content="article">
  
    <meta property="article:tag" content="django">
  
    <meta property="article:tag" content="highcharts.js">
  
    <meta property="article:tag" content="js">
  
    <meta property="article:tag" content="javascript">
  
    <meta property="article:tag" content="charts">
  
    <meta property="article:tag" content="jquery">
  
  <style type="text/css">
    @media (min-width: 750px) {
      body {
        /*padding-top:50px!important;*/
      }
    }
  </style>
  <script src="http://m.servedby-buysellads.com/monetization.js"></script>
</head>
<body>
  <div id="top" style="visibility: hidden"></div>
<header>
  <div class="container">
    <ul class="menu menu-right">
      <li class="menu-item">
        <a href="../../../../search/index.html">
          <span class="fa fa-search"></span>
        </a>
      </li>
      <li class="toggle-menu">
        <a href="javascript:void(0);">
          <span class="fa fa-bars"></span>
        </a>
      </li>
    </ul>
    <ul class="menu menu-left">
      <li class="logo">
        <a href="../../../../index.html" style="font-weight: 900">simple<span class="brand">is</span>better<span class="brand">than</span>complex</a>
      </li>
      <li class="menu-item">
        <a href="../../../../index.html">
          <span class="fa fa-home" style="margin-right: 3px"></span>
          Home
        </a>
      </li>
      <li class="menu-item">
        <a href="../../../../archive/index.html">
          <span class="fa fa-archive" style="margin-right: 3px"></span>
          Articles
        </a>
      </li>
      <li class="menu-item">
        <a href="../../../../videos/index.html">
          <span class="fa fa-video-camera" style="margin-right: 3px"></span>
          Videos
        </a>
      </li>
      <li class="menu-item">
        <a href="../../../../series/index.html">
          <span class="fa fa-book" style="margin-right: 3px"></span>
          Series
        </a>
      </li>
      <li class="menu-item">
        <a href="../../../../snippets/index.html">
          <span class="fa fa-code" style="margin-right: 3px"></span>
          Snippets
        </a>
      </li>
      <li class="menu-item">
        <a href="../../../../sponsor/index.html">
          <span class="fa fa-bullhorn" style="margin-right: 3px"></span>
          Sponsor
        </a>
      </li>
      <li class="menu-item">
        <a href="../../../../feed.xml" target="_blank">
          <span class="fa fa-rss" style="margin-right: 3px"></span>
          RSS
        </a>
      </li>
      <li class="menu-item">
        <a href="https://colossus.simpleisbetterthancomplex.com/subscribe/d2320a41-0378-4aa8-8f4e-5bb1ffcd521d/" class="brand" target="_blank">
          <span class="fa fa-send" style="margin-right: 3px"></span> Subscribe
        </a>
      </li>
      <li class="menu-item hidden-mobile">
        <a href="../../../../search/index.html">
          <span class="fa fa-search"></span> Search
        </a>
      </li>
    </ul>
  </div>
</header>

  <!--p style="text-align:center;font-size:1.4rem;margin-top:2rem;margin-bottom:2rem;">
    <span style="background-color:#1eaedb;color:#fff;border-radius:3px;padding:3px 5px;font-size:1.2rem;margin-right:5px;">Sponsored</span>
    <a href="/sponsor/" rel="noopener nofollow">
      By You? Learn more about sponsorship of the blog.
    </a>
  </p-->

  <main>
    <div class="container">
      <div class="row">
        <div class="ten offset-by-one columns content post">
          <div class="card post-author">
  <div class="author-picture">
    <img src="../../../../img/picture.jpg" alt="Vitor Freitas">
  </div>
  <div class="author-info">
    <p class="name">By <strong>Vitor Freitas</strong></p>
    <a href="https://www.digitalocean.com/?refcode=074832454ff1&amp;utm_campaign=Referral_Invite&amp;utm_medium=Referral_Program&amp;utm_source=badge" class="powered-by-do">
      <img src="https://web-platforms.sfo2.cdn.digitaloceanspaces.com/WWW/Badge 1.svg" alt="DigitalOcean Referral Badge">
    </a>
    <p class="bio">
      I'm a passionate software developer and researcher. I write about Python, Django and Web Development on a weekly basis. <a href="../../../../about/index.html" rel="author">Read more</a>.
    </p>
    <p class="contact">
      <a href="https://www.youtube.com/VitorFreitas" rel="me noopener" target="_blank" title="YouTube"><i class="fa fa-youtube-play"></i></a>
      <a href="https://github.com/vitorfs" rel="me noopener" target="_blank" title="GitHub"><i class="fa fa-github"></i></a>
      <a href="https://twitter.com/vitorfs" rel="me noopener" target="_blank" title="Twitter"><i class="fa fa-twitter"></i></a>
      <a href="https://facebook.com/vitorfs" rel="me noopener" target="_blank" title="Facebook"><i class="fa fa-facebook-official"></i></a>
      <a href="https://linkedin.com/in/vitorfs" rel="me noopener" target="_blank" title="LinkedIn"><i class="fa fa-linkedin-square"></i></a>
      <a href="https://instagram.com/vitorfs" rel="me noopener" target="_blank" title="Instagram"><i class="fa fa-instagram"></i></a>
      <a href="../../../../contact/index.html" title="Contact"><i class="fa fa-envelope"></i></a>
    </p>
  </div>
  
  
  <div class="row">
    <div class="six columns">
      <div id="ad">
        <script async type="text/javascript" src="http://cdn.carbonads.com/carbon.js?serve=CKYIEKQM&amp;placement=simpleisbetterthancomplexcom" id="_carbonads_js"></script>
      </div>
    </div>


    <!--div class="six columns">
      <div id="ad2">
        <div id="sponsored">
          <a href="/sponsor/">
            <img src="/media/sponsored/ad.png" alt="Advertise Here">
            <span>Reach 90k+ Django developers every month. Learn more about sponsorship of the blog.</span>
          </a>
          <small>
            <a href="/sponsor/">Sponsored</a>
          </small>
        </div>

        <div id="sponsored">
          <a href="https://click.linksynergy.com/link?id=phY4769lVwA&offerid=507388.567828&type=2&murl=https%3A%2F%2Fwww.udemy.com%2Fcomplete-python-bootcamp%2F" target="_blank" rel="noopener nofollow">
            <img border="0" src="https://udemy-images.udemy.com/course/480x270/567828_67d0.jpg" alt="Complete Python Bootcamp: Go from zero to hero in Python 3">
            <span>Complete Python Bootcamp: Go from zero to hero in Python 3</span>
          </a>
          <small>
            <a href="/sponsor/">Sponsored</a>
          </small>
          <img border="0" width="1" height="1" src="https://ad.linksynergy.com/fs-bin/show?id=phY4769lVwA&bids=507388.567828&type=2&subid=0" alt="LinkSynergy">
        </div>

      </div>
    </div-->


  </div>
  
</div>


          <p style="text-align:center;font-size:1.4rem;margin-bottom:4rem;">
            <i class="fa fa-youtube-play" style="color:#ff0000!important;"></i> <a href="https://www.youtube.com/VitorFreitas?sub_confirmation=1" target="_blank">Subscribe to our YouTube Channel!</a>
            <br>
            <a href="https://youtu.be/Udf4VbtM92Y" target="_blank">[Jul 12, 2021] New Video: How to Use Django Rest Framework Permissions (DRF Tutorial - Part 7)</a>
          </p>

          <div class="card">
            
  <h5 class="post-category">
    
      tutorial
    
  </h5>
  <hr class="dashed">

<h3 class="post-title">How to Integrate Highcharts.js with Django</h3>
<ul class="post-meta">
  <li>
    <i class="fa fa-calendar"></i> Apr 3, 2018
  </li>
  <li>
    <i class="fa fa-clock-o"></i>
    17 minutes read
  </li>
  <li>
    <i class="fa fa-comments"></i>
    <a href="#disqus_thread" data-disqus-identifier="/tutorial/2018/04/03/how-to-integrate-highcharts-js-with-django">comments</a>
  </li>
  <li>
    <i class="fa fa-eye"></i>
    <span class="ga-page-views" data-ga-identifier="how-to-integrate-highcharts-js-with-django.html"></span> views
  </li>
  
  
</ul>

  <div class="post-featured-image">
    <img src="../../../../media/2018/04/featured-highcharts.jpg" alt="How to Integrate Highcharts.js with Django" class="featured-image">
    
      <small>(Picture: <a href="https://www.pexels.com/photo/business-charts-commerce-computer-265087/" target="_blank">https://www.pexels.com/photo/business-charts-commerce-computer-265087/</a>)</small>
    
  </div>


            <article>
              <p>Highcharts is, in my opinion, one of the best JavaScript libraries to work with data visualization and charts out
there. Even though Highcharts is open source, it’s a commercial library. It’s free for use in non-commercial
applications though.</p>

<p>In this tutorial we are going to explore how to integrate it with a Django project to render dynamically generated
charts. In relation to drawing the charts and rendering it to the client, all the hard work is done by Highcharts at
the client side. The configuration and setup is pure JavaScript.</p>

<p>The main challenge here is on how to translate the data from your backend to a format that Highcharts will
understand. This data may come from a database or an external API, and probably is represented as Python objects
(like in a QuerySet), or simply be represented as Python dictionaries or lists.</p>

<p>Generally speaking, there are two ways to do it:</p>

<ul>
  <li>Via the request/response cycle, using Python and the Django template engine to write the JavaScript code directly in the template;</li>
  <li>Via an async request using AJAX, returning the data in JSON format.</li>
</ul>

<p>The first option is like a <em>brute force</em> and in many cases the easiest way. The second option requires a slightly
complicated setup, but you will also benefit from the page loading speed and from the maintainability of the code.</p>

<hr />

<h4 id="installation--setup">Installation / Setup</h4>

<p>Basically we just need to include the Highcharts library in our template and we are ready to go. You can either
<a href="https://www.highcharts.com/download" target="_blank">download</a> and serve it locally or simply use their CDN:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://code.highcharts.com/highcharts.src.js"</span><span class="nt">&gt;&lt;/script&gt;</span></code></pre></figure>

<hr />

<h4 id="usage-scenario">Usage Scenario</h4>

<p>Now we need some data. I thought that it would be fun to play with an existing dataset. The Titanic dataset is pretty
famous one, and easy to access.</p>

<p>What I did here was loading the dataset (1300~ rows) into a model named <code class="highlighter-rouge">Passenger</code>:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">Passenger</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">()</span>
    <span class="n">sex</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">()</span>
    <span class="n">survived</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">()</span>
    <span class="n">age</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">FloatField</span><span class="p">()</span>
    <span class="n">ticket_class</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveSmallIntegerField</span><span class="p">()</span>
    <span class="n">embarked</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">()</span></code></pre></figure>

<p>If you are familiar with data mining, data science, or machine learning probably you already know this data set. This
dataset is usually used for learning purpose. It’s composed by the list of passengers of the famous
<a href="https://en.wikipedia.org/wiki/RMS_Titanic" target="_blank">RMS Titanic tragedy</a>.</p>

<p>We won’t be doing anything smart with it, just querying the database and displaying the data using Highcharts.</p>

<hr />

<h4 id="highcharts-basics">Highcharts Basics</h4>

<p>I won’t dive into deep details about Highcharts. The goal is to understand how to make Django and Highcharts talk.
For details about how to do this or that with Highcharts, best thing is to consult the
<a href="https://www.highcharts.com/docs" target="_blank">official documentation</a>.</p>

<p>Here is a working example of a column chart using Highcharts:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="cp">&lt;!doctype html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;title&gt;</span>Django Highcharts Example<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"container"</span><span class="nt">&gt;&lt;/div&gt;</span>
  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://code.highcharts.com/highcharts.src.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;script&gt;</span>
    <span class="nx">Highcharts</span><span class="p">.</span><span class="nx">chart</span><span class="p">(</span><span class="s1">'container'</span><span class="p">,</span> <span class="p">{</span>
        <span class="na">chart</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">type</span><span class="p">:</span> <span class="s1">'column'</span>
        <span class="p">},</span>
        <span class="na">title</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">text</span><span class="p">:</span> <span class="s1">'Historic World Population by Region'</span>
        <span class="p">},</span>
        <span class="na">xAxis</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">categories</span><span class="p">:</span> <span class="p">[</span><span class="s1">'Africa'</span><span class="p">,</span> <span class="s1">'America'</span><span class="p">,</span> <span class="s1">'Asia'</span><span class="p">,</span> <span class="s1">'Europe'</span><span class="p">,</span> <span class="s1">'Oceania'</span><span class="p">]</span>
        <span class="p">},</span>
        <span class="na">series</span><span class="p">:</span> <span class="p">[{</span>
            <span class="na">name</span><span class="p">:</span> <span class="s1">'Year 1800'</span><span class="p">,</span>
            <span class="na">data</span><span class="p">:</span> <span class="p">[</span><span class="mi">107</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">635</span><span class="p">,</span> <span class="mi">203</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="na">name</span><span class="p">:</span> <span class="s1">'Year 1900'</span><span class="p">,</span>
            <span class="na">data</span><span class="p">:</span> <span class="p">[</span><span class="mi">133</span><span class="p">,</span> <span class="mi">156</span><span class="p">,</span> <span class="mi">947</span><span class="p">,</span> <span class="mi">408</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="na">name</span><span class="p">:</span> <span class="s1">'Year 2012'</span><span class="p">,</span>
            <span class="na">data</span><span class="p">:</span> <span class="p">[</span><span class="mi">1052</span><span class="p">,</span> <span class="mi">954</span><span class="p">,</span> <span class="mi">4250</span><span class="p">,</span> <span class="mi">740</span><span class="p">,</span> <span class="mi">38</span><span class="p">]</span>
        <span class="p">}]</span>
    <span class="p">});</span>
  <span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></figure>

<p>The code above generates the following chart:</p>

<p><img src="../../../../media/2018/04/highcharts-column-chart.png" alt="Highcharts Column Chart" /></p>

<p>The basic structure here is:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">Highcharts</span><span class="p">.</span><span class="nx">chart</span><span class="p">(</span><span class="s1">'id_of_the_container'</span><span class="p">,</span> <span class="p">{</span>
  <span class="c1">// dictionary of options/configuration</span>
<span class="p">});</span></code></pre></figure>

<hr />

<h4 id="basic-example">Basic Example</h4>

<p>The most straightforward way to do it is by writing directly in the template (which is not recommended).</p>

<p>Let’s write an query to display the number of survivors and deaths organized by ticket class.</p>

<p><strong>views.py</strong></p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.db.models</span> <span class="kn">import</span> <span class="n">Count</span><span class="p">,</span> <span class="n">Q</span>
<span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render</span>
<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">Passenger</span>

<span class="k">def</span> <span class="nf">ticket_class_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">dataset</span> <span class="o">=</span> <span class="n">Passenger</span><span class="o">.</span><span class="n">objects</span> \
        <span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="s">'ticket_class'</span><span class="p">)</span> \
        <span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">survived_count</span><span class="o">=</span><span class="n">Count</span><span class="p">(</span><span class="s">'ticket_class'</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="n">Q</span><span class="p">(</span><span class="n">survived</span><span class="o">=</span><span class="bp">True</span><span class="p">)),</span>
                  <span class="n">not_survived_count</span><span class="o">=</span><span class="n">Count</span><span class="p">(</span><span class="s">'ticket_class'</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="n">Q</span><span class="p">(</span><span class="n">survived</span><span class="o">=</span><span class="bp">False</span><span class="p">)))</span> \
        <span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s">'ticket_class'</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">'ticket_class.html'</span><span class="p">,</span> <span class="p">{</span><span class="s">'dataset'</span><span class="p">:</span> <span class="n">dataset</span><span class="p">})</span></code></pre></figure>

<p>The queryset above generates a data in the following format:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="p">[</span>
  <span class="p">{</span><span class="s">'ticket_class'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">'survived_count'</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span> <span class="s">'not_survived_count'</span><span class="p">:</span> <span class="mi">123</span><span class="p">},</span>
  <span class="p">{</span><span class="s">'ticket_class'</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">'survived_count'</span><span class="p">:</span> <span class="mi">119</span><span class="p">,</span> <span class="s">'not_survived_count'</span><span class="p">:</span> <span class="mi">158</span><span class="p">},</span>
  <span class="p">{</span><span class="s">'ticket_class'</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s">'survived_count'</span><span class="p">:</span> <span class="mi">181</span><span class="p">,</span> <span class="s">'not_survived_count'</span><span class="p">:</span> <span class="mi">528</span><span class="p">}</span>
<span class="p">]</span></code></pre></figure>

<p>Then we could just write it in the template, inside the JavaScript tags:</p>

<p><strong>ticket_class.html</strong></p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"container"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://code.highcharts.com/highcharts.src.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script&gt;</span>
  <span class="nx">Highcharts</span><span class="p">.</span><span class="nx">chart</span><span class="p">(</span><span class="s1">'container'</span><span class="p">,</span> <span class="p">{</span>
      <span class="na">chart</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">type</span><span class="p">:</span> <span class="s1">'column'</span>
      <span class="p">},</span>
      <span class="na">title</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">text</span><span class="p">:</span> <span class="s1">'Titanic Survivors by Ticket Class'</span>
      <span class="p">},</span>
      <span class="na">xAxis</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">categories</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span><span class="o">%</span> <span class="k">for</span> <span class="nx">entry</span> <span class="k">in</span> <span class="nx">dataset</span> <span class="o">%</span><span class="p">}</span><span class="s1">'{{ entry.ticket_class }} Class'</span><span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="nx">not</span> <span class="nx">forloop</span><span class="p">.</span><span class="nx">last</span> <span class="o">%</span><span class="p">},</span> <span class="p">{</span><span class="o">%</span> <span class="nx">endif</span> <span class="o">%</span><span class="p">}{</span><span class="o">%</span> <span class="nx">endfor</span> <span class="o">%</span><span class="p">}</span>
          <span class="p">]</span>
      <span class="p">},</span>
      <span class="nx">series</span><span class="err">:</span> <span class="p">[{</span>
          <span class="na">name</span><span class="p">:</span> <span class="s1">'Survived'</span><span class="p">,</span>
          <span class="na">data</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span><span class="o">%</span> <span class="k">for</span> <span class="nx">entry</span> <span class="k">in</span> <span class="nx">dataset</span> <span class="o">%</span><span class="p">}{{</span> <span class="nx">entry</span><span class="p">.</span><span class="nx">survived_count</span> <span class="p">}}{</span><span class="o">%</span> <span class="k">if</span> <span class="nx">not</span> <span class="nx">forloop</span><span class="p">.</span><span class="nx">last</span> <span class="o">%</span><span class="p">},</span> <span class="p">{</span><span class="o">%</span> <span class="nx">endif</span> <span class="o">%</span><span class="p">}{</span><span class="o">%</span> <span class="nx">endfor</span> <span class="o">%</span><span class="p">}</span>
          <span class="p">],</span>
          <span class="nx">color</span><span class="err">:</span> <span class="s1">'green'</span>
      <span class="p">},</span> <span class="p">{</span>
          <span class="na">name</span><span class="p">:</span> <span class="s1">'Not survived'</span><span class="p">,</span>
          <span class="na">data</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span><span class="o">%</span> <span class="k">for</span> <span class="nx">entry</span> <span class="k">in</span> <span class="nx">dataset</span> <span class="o">%</span><span class="p">}{{</span> <span class="nx">entry</span><span class="p">.</span><span class="nx">not_survived_count</span> <span class="p">}}{</span><span class="o">%</span> <span class="k">if</span> <span class="nx">not</span> <span class="nx">forloop</span><span class="p">.</span><span class="nx">last</span> <span class="o">%</span><span class="p">},</span> <span class="p">{</span><span class="o">%</span> <span class="nx">endif</span> <span class="o">%</span><span class="p">}{</span><span class="o">%</span> <span class="nx">endfor</span> <span class="o">%</span><span class="p">}</span>
          <span class="p">],</span>
          <span class="nx">color</span><span class="err">:</span> <span class="s1">'red'</span>
      <span class="p">}]</span>
  <span class="p">});</span>
<span class="nt">&lt;/script&gt;</span></code></pre></figure>

<p><img src="../../../../media/2018/04/survivors-by-class.png" alt="Titanic Survivors by Ticket Class" /></p>

<p>This kind of strategy is not really a good idea because the code is hard to read, hard to maintain and it is too easy
to shoot in the foot. Because we are using Python to generate JavaScript code, we have to format it properly.
For example, the code <code class="highlighter-rouge"><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">if</span><span class="w"> </span><span class="err">not</span><span class="w"> </span><span class="err">forloop.last</span><span class="w"> </span><span class="err">%</span><span class="p">}</span><span class="err">,</span><span class="w"> </span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">endif</span><span class="w"> </span><span class="err">%</span><span class="p">}</span></code> is to not append a comma (,) after
the last item of the array (otherwise the result would be <code class="highlighter-rouge">[200, 119, 181,]</code>). The newest JavaScript versions are
forgiving and accepts an extra comma (like Python does), but older versions don’t, so it might cause problem in old
browsers. Anyway, the point is you have to make sure your Python code is writing valid JavaScript code.</p>

<p>A slightly better way to do it would be processing the data a little bit more in the view:</p>

<p><strong>views.py</strong></p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">django.db.models</span> <span class="kn">import</span> <span class="n">Count</span><span class="p">,</span> <span class="n">Q</span>
<span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render</span>
<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">Passenger</span>

<span class="k">def</span> <span class="nf">ticket_class_view_2</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">dataset</span> <span class="o">=</span> <span class="n">Passenger</span><span class="o">.</span><span class="n">objects</span> \
        <span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="s">'ticket_class'</span><span class="p">)</span> \
        <span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">survived_count</span><span class="o">=</span><span class="n">Count</span><span class="p">(</span><span class="s">'ticket_class'</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="n">Q</span><span class="p">(</span><span class="n">survived</span><span class="o">=</span><span class="bp">True</span><span class="p">)),</span>
                  <span class="n">not_survived_count</span><span class="o">=</span><span class="n">Count</span><span class="p">(</span><span class="s">'ticket_class'</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="n">Q</span><span class="p">(</span><span class="n">survived</span><span class="o">=</span><span class="bp">False</span><span class="p">)))</span> \
        <span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s">'ticket_class'</span><span class="p">)</span>

    <span class="n">categories</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="n">survived_series</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="n">not_survived_series</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">dataset</span><span class="p">:</span>
        <span class="n">categories</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">'</span><span class="si">%</span><span class="s">s Class'</span> <span class="o">%</span> <span class="n">entry</span><span class="p">[</span><span class="s">'ticket_class'</span><span class="p">])</span>
        <span class="n">survived_series</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entry</span><span class="p">[</span><span class="s">'survived_count'</span><span class="p">])</span>
        <span class="n">not_survived_series</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entry</span><span class="p">[</span><span class="s">'not_survived_count'</span><span class="p">])</span>

    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">'ticket_class_2.html'</span><span class="p">,</span> <span class="p">{</span>
        <span class="s">'categories'</span><span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">categories</span><span class="p">),</span>
        <span class="s">'survived_series'</span><span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">survived_series</span><span class="p">),</span>
        <span class="s">'not_survived_series'</span><span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">not_survived_series</span><span class="p">)</span>
    <span class="p">})</span></code></pre></figure>

<p><strong>ticket_class_2.html</strong></p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"container"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://code.highcharts.com/highcharts.src.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script&gt;</span>
  <span class="nx">Highcharts</span><span class="p">.</span><span class="nx">chart</span><span class="p">(</span><span class="s1">'container'</span><span class="p">,</span> <span class="p">{</span>
      <span class="na">chart</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">type</span><span class="p">:</span> <span class="s1">'column'</span>
      <span class="p">},</span>
      <span class="na">title</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">text</span><span class="p">:</span> <span class="s1">'Titanic Survivors by Ticket Class'</span>
      <span class="p">},</span>
      <span class="na">xAxis</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">categories</span><span class="p">:</span> <span class="p">{{</span> <span class="nx">categories</span><span class="o">|</span><span class="nx">safe</span> <span class="p">}}</span>
      <span class="p">},</span>
      <span class="na">series</span><span class="p">:</span> <span class="p">[{</span>
          <span class="na">name</span><span class="p">:</span> <span class="s1">'Survived'</span><span class="p">,</span>
          <span class="na">data</span><span class="p">:</span> <span class="p">{{</span> <span class="nx">survived_series</span> <span class="p">}},</span>
          <span class="na">color</span><span class="p">:</span> <span class="s1">'green'</span>
      <span class="p">},</span> <span class="p">{</span>
          <span class="na">name</span><span class="p">:</span> <span class="s1">'Not survived'</span><span class="p">,</span>
          <span class="na">data</span><span class="p">:</span> <span class="p">{{</span> <span class="nx">not_survived_series</span> <span class="p">}},</span>
          <span class="na">color</span><span class="p">:</span> <span class="s1">'red'</span>
      <span class="p">}]</span>
  <span class="p">});</span>
<span class="nt">&lt;/script&gt;</span></code></pre></figure>

<p>Here’s what we are doing: first run through the queryset and create three separate lists, append the values and do the
formatting. After that, use the <code class="highlighter-rouge">json</code> module and dump the Python lists into JSON format. The result are Python strings
properly formatted as JSON data.</p>

<p>We have to use the <code class="highlighter-rouge">safe</code> template filter to properly render the <code class="highlighter-rouge">categories</code> because Django automatically escape
characters like <code class="highlighter-rouge">'</code> and <code class="highlighter-rouge">"</code> for safety reason, so we have to instruct Django to trust and render it as it is.</p>

<p>We could also do all the configuration in the backend, like this:</p>

<p><strong>views.py</strong></p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">django.db.models</span> <span class="kn">import</span> <span class="n">Count</span><span class="p">,</span> <span class="n">Q</span>
<span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render</span>
<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">Passenger</span>

<span class="k">def</span> <span class="nf">ticket_class_view_3</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">dataset</span> <span class="o">=</span> <span class="n">Passenger</span><span class="o">.</span><span class="n">objects</span> \
        <span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="s">'ticket_class'</span><span class="p">)</span> \
        <span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">survived_count</span><span class="o">=</span><span class="n">Count</span><span class="p">(</span><span class="s">'ticket_class'</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="n">Q</span><span class="p">(</span><span class="n">survived</span><span class="o">=</span><span class="bp">True</span><span class="p">)),</span>
                  <span class="n">not_survived_count</span><span class="o">=</span><span class="n">Count</span><span class="p">(</span><span class="s">'ticket_class'</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="n">Q</span><span class="p">(</span><span class="n">survived</span><span class="o">=</span><span class="bp">False</span><span class="p">)))</span> \
        <span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s">'ticket_class'</span><span class="p">)</span>

    <span class="n">categories</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="n">survived_series_data</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="n">not_survived_series_data</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">dataset</span><span class="p">:</span>
        <span class="n">categories</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">'</span><span class="si">%</span><span class="s">s Class'</span> <span class="o">%</span> <span class="n">entry</span><span class="p">[</span><span class="s">'ticket_class'</span><span class="p">])</span>
        <span class="n">survived_series_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entry</span><span class="p">[</span><span class="s">'survived_count'</span><span class="p">])</span>
        <span class="n">not_survived_series_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entry</span><span class="p">[</span><span class="s">'not_survived_count'</span><span class="p">])</span>

    <span class="n">survived_series</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'name'</span><span class="p">:</span> <span class="s">'Survived'</span><span class="p">,</span>
        <span class="s">'data'</span><span class="p">:</span> <span class="n">survived_series_data</span><span class="p">,</span>
        <span class="s">'color'</span><span class="p">:</span> <span class="s">'green'</span>
    <span class="p">}</span>

    <span class="n">not_survived_series</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'name'</span><span class="p">:</span> <span class="s">'Survived'</span><span class="p">,</span>
        <span class="s">'data'</span><span class="p">:</span> <span class="n">not_survived_series_data</span><span class="p">,</span>
        <span class="s">'color'</span><span class="p">:</span> <span class="s">'red'</span>
    <span class="p">}</span>

    <span class="n">chart</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'chart'</span><span class="p">:</span> <span class="p">{</span><span class="s">'type'</span><span class="p">:</span> <span class="s">'column'</span><span class="p">},</span>
        <span class="s">'title'</span><span class="p">:</span> <span class="p">{</span><span class="s">'text'</span><span class="p">:</span> <span class="s">'Titanic Survivors by Ticket Class'</span><span class="p">},</span>
        <span class="s">'xAxis'</span><span class="p">:</span> <span class="p">{</span><span class="s">'categories'</span><span class="p">:</span> <span class="n">categories</span><span class="p">},</span>
        <span class="s">'series'</span><span class="p">:</span> <span class="p">[</span><span class="n">survived_series</span><span class="p">,</span> <span class="n">not_survived_series</span><span class="p">]</span>
    <span class="p">}</span>

    <span class="n">dump</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">chart</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">'ticket_class_3.html'</span><span class="p">,</span> <span class="p">{</span><span class="s">'chart'</span><span class="p">:</span> <span class="n">dump</span><span class="p">})</span></code></pre></figure>

<p><strong>ticket_class_3.html</strong></p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"container"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://code.highcharts.com/highcharts.src.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script&gt;</span>
  <span class="nx">Highcharts</span><span class="p">.</span><span class="nx">chart</span><span class="p">(</span><span class="s1">'container'</span><span class="p">,</span> <span class="p">{{</span> <span class="nx">chart</span><span class="o">|</span><span class="nx">safe</span> <span class="p">}});</span>
<span class="nt">&lt;/script&gt;</span></code></pre></figure>

<p>As you can see, that way we move all the configuration to the server side. But we are still interacting with the
JavaScript code directly.</p>

<hr />

<h4 id="json-example">JSON Example</h4>

<p>Now this is how I usually like to work with Highcharts (or any other JavaScript library that interacts with the
server).</p>

<p>The idea here is to render the chart using an asynchronous call, returning a <code class="highlighter-rouge">JsonResponse</code> from the server.</p>

<p>This time, we are going to need two routes:</p>

<p><strong>urls.py</strong></p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.urls</span> <span class="kn">import</span> <span class="n">path</span>

<span class="kn">from</span> <span class="nn">passengers</span> <span class="kn">import</span> <span class="n">views</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">path</span><span class="p">(</span><span class="s">'json-example/'</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">json_example</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'json_example'</span><span class="p">),</span>
    <span class="n">path</span><span class="p">(</span><span class="s">'json-example/data/'</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">chart_data</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'chart_data'</span><span class="p">),</span>
<span class="p">]</span></code></pre></figure>

<p>The <code class="highlighter-rouge">json_example</code> URL route is pointing to a regular view, which will render the template which will invoke the
<code class="highlighter-rouge">chart_data</code> view. This call can be automatic upon page load, or it can be triggered by an action (a button click
for example).</p>

<p><strong>views.py</strong></p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">json_example</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">'json_example.html'</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">chart_data</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">dataset</span> <span class="o">=</span> <span class="n">Passenger</span><span class="o">.</span><span class="n">objects</span> \
        <span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="s">'embarked'</span><span class="p">)</span> \
        <span class="o">.</span><span class="n">exclude</span><span class="p">(</span><span class="n">embarked</span><span class="o">=</span><span class="s">''</span><span class="p">)</span> \
        <span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">total</span><span class="o">=</span><span class="n">Count</span><span class="p">(</span><span class="s">'embarked'</span><span class="p">))</span> \
        <span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s">'embarked'</span><span class="p">)</span>

    <span class="n">port_display_name</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">port_tuple</span> <span class="ow">in</span> <span class="n">Passenger</span><span class="o">.</span><span class="n">PORT_CHOICES</span><span class="p">:</span>
        <span class="n">port_display_name</span><span class="p">[</span><span class="n">port_tuple</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">port_tuple</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

    <span class="n">chart</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'chart'</span><span class="p">:</span> <span class="p">{</span><span class="s">'type'</span><span class="p">:</span> <span class="s">'pie'</span><span class="p">},</span>
        <span class="s">'title'</span><span class="p">:</span> <span class="p">{</span><span class="s">'text'</span><span class="p">:</span> <span class="s">'Titanic Survivors by Ticket Class'</span><span class="p">},</span>
        <span class="s">'series'</span><span class="p">:</span> <span class="p">[{</span>
            <span class="s">'name'</span><span class="p">:</span> <span class="s">'Embarkation Port'</span><span class="p">,</span>
            <span class="s">'data'</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">row</span><span class="p">:</span> <span class="p">{</span><span class="s">'name'</span><span class="p">:</span> <span class="n">port_display_name</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s">'embarked'</span><span class="p">]],</span> <span class="s">'y'</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="s">'total'</span><span class="p">]},</span> <span class="n">dataset</span><span class="p">))</span>
        <span class="p">}]</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">JsonResponse</span><span class="p">(</span><span class="n">chart</span><span class="p">)</span></code></pre></figure>

<p>Here we can see the <code class="highlighter-rouge">json_example</code> is nothing special, just returning the <code class="highlighter-rouge">json_example.html</code> template, which we are
going to explore in a minute.</p>

<p>The <code class="highlighter-rouge">chart_data</code> is the one doing all the hard work. Here we have the database query and building the <code class="highlighter-rouge">chart</code>
dictionary. In the end we return the chart data as a JSON object.</p>

<p><strong>json_example.html</strong></p>

<figure class="highlight"><pre><code class="language-django" data-lang="django"><span class="cp">&lt;!doctype html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;title&gt;</span>Django Highcharts Example<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"container"</span> <span class="na">data-url=</span><span class="s">"</span><span class="cp">{%</span> <span class="nv">url</span> <span class="s1">'chart_data'</span> <span class="cp">%}</span><span class="s">"</span><span class="nt">&gt;&lt;/div&gt;</span>
  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://code.highcharts.com/highcharts.src.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://code.jquery.com/jquery-3.3.1.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;script&gt;</span>
    <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
      <span class="na">url</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#container"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"data-url"</span><span class="p">),</span>
      <span class="na">dataType</span><span class="p">:</span> <span class="s1">'json'</span><span class="p">,</span>
      <span class="na">success</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">Highcharts</span><span class="p">.</span><span class="nx">chart</span><span class="p">(</span><span class="s2">"container"</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></figure>

<p>Here is where the magic happens. The div with id <code class="highlighter-rouge">container</code> is where the chart is going to be rendered. Now, observe
that I included a custom attribute named <code class="highlighter-rouge">data-url</code>. Inside this attribute I stored the path to the view that will be
used to load the chart data.</p>

<p>Inside the ajax call, we make the request based on the URL provided in the <code class="highlighter-rouge">data-url</code> and instruct the ajax request
that we are expecting a JSON object in return (defined by the <code class="highlighter-rouge">dataType</code>). When the request completes, the JSON
response will be inside the <code class="highlighter-rouge">data</code> parameter in the success function. Finally, inside the <code class="highlighter-rouge">success</code> function, we
render the chart using the Highcharts API.</p>

<p>This is extremely useful because now we can decouple all the JavaScript from our template. In this example we used a
single file for simplicity, but nothing stops us now from saving the script tag content in a separate file. This is
great because we are no longer mixing the Django template language with JavaScript.</p>

<p>The result is the following screen shot:</p>

<p><img src="../../../../media/2018/04/highcharts-pie-chart.png" alt="Highcharts Pie Chart" /></p>

<hr />

<h4 id="conclusions">Conclusions</h4>

<p>In this tutorial we explored the basics on how to integrate Highcharts.js with Django. The implementation concepts used
in this tutorial can be applied in other charts libraries such as Charts.js. The process should be very similar.</p>

<p>Whenever possible, try to avoid interacting with JavaScript code using the Django Template Language. Prefer returning
the data as JSON objects already processed and ready to use.</p>

<p>Usually when working with charts and data visualization the most challenging part is to squeeze the data in the format
required to render the chart. What I usually do is first create a static example hardcoding the data so I can have an
idea about the data format. Next, I start creating the QuerySet using in the Python terminal. After I get it right,
I finally write the view function.</p>

<p>If you want to learn more, the best way is to get your hands dirty. Here’s something you can do:</p>

<ul>
  <li>First study the format of the data by checking the <a href="https://github.com/sibtc/django-highcharts-example/blob/master/titanic.csv">titanic.csv</a> file;</li>
  <li>Then examine the <a href="https://github.com/sibtc/django-highcharts-example/blob/master/passengers/models.py">Passenger model class</a>;</li>
  <li>Go to the <a href="https://www.highcharts.com/demo">Highcharts.js demo page</a> and find a chart you want to implement;</li>
  <li>Clone the <a href="https://github.com/sibtc/django-highcharts-example">django-highcharts-example repository</a> on GitHub and implement it.</li>
</ul>

            </article>
            
            <hr>
            <div class="popular-posts related-posts">
  <h4>Related Posts</h4>
    <div class="row">
      <div class="four columns">
<a href="../../../2020/01/19/how-to-use-chart-js-with-django.html">
<img src="../../../../media/2020/01/featured-chartjs.jpg" alt="How to Use Chart.js with Django" title="How to Use Chart.js with Django">
How to Use Chart.js with Django
</a>
</div>
<div class="four columns">
<a href="../../01/29/how-to-implement-dependent-or-chained-dropdown-list-with-django.html">
<img src="../../../../media/2018/01/featured-dropdown.jpg" alt="How to Implement Dependent/Chained Dropdown List with Django" title="How to Implement Dependent/Chained Dropdown List with Django">
How to Implement Dependent/Chained Dropdown List with Django
</a>
</div>
<div class="four columns">
<a href="../../../2017/03/13/how-to-create-infinite-scroll-with-django.html">
<img src="../../../../media/2017/03/featured-infinite-scroll.jpg" alt="How to Create Infinite Scroll With Django" title="How to Create Infinite Scroll With Django">
How to Create Infinite Scroll With Django
</a>
</div>
    </div>
</div>


            <hr class="dashed">
<div class="row">
  <div class="six columns post-tags" style="padding-top: 4px">
    
      <a href="../../../../tag/django/index.html"><span class="tag">django</span></a>
    
      <a href="../../../../tag/highcharts-js/index.html"><span class="tag">highcharts.js</span></a>
    
      <a href="../../../../tag/js/index.html"><span class="tag">js</span></a>
    
      <a href="../../../../tag/javascript/index.html"><span class="tag">javascript</span></a>
    
      <a href="../../../../tag/charts/index.html"><span class="tag">charts</span></a>
    
      <a href="../../../../tag/jquery/index.html"><span class="tag">jquery</span></a>
    
  </div>
  <div class="six columns post-share">
    <div class="social">
  Share this post
  <a href="http://vk.com/share.php?url=https://sibt.co/2JglEvC"
     rel="nofollow"
     target="_blank"
     title="Share on VK">
    <i class="fa fa-vk"></i>
  </a>
  <a href="https://twitter.com/intent/tweet?text=How%20to%20Integrate%20Highcharts.js%20with%20Django&amp;url=https://sibt.co/2q1OXte&amp;via=vitorfs&amp;related=vitorfs"
     rel="nofollow"
     target="_blank"
     title="Share on Twitter">
    <i class="fa fa-twitter"></i>
  </a>
  <a href="https://www.facebook.com/sharer/sharer.php?app_id=1645747765697865&amp;u=https://sibt.co/2q2wgWo"
     rel="nofollow"
     target="_blank"
     title="Share on Facebook">
    <i class="fa fa-facebook"></i>
  </a>
  <a href="http://www.linkedin.com/shareArticle?mini=true&amp;url=https://sibt.co/2JexmqI&amp;title=How%20to%20Integrate%20Highcharts.js%20with%20Django&amp;summary=Highcharts%20is,%20in%20my%20opinion,%20one%20of%20the%20best%20JavaScript%20libraries%20to%20work%20with%20data%20visualization%20and%20charts%20outthere.%20Even%20though%20Highcharts%20is%20open%20source,%20it%E2%80%99s%20a%20commercial%20library.%20It%E2%80%99s%20free%20f...&amp;source=https://simpleisbetterthancomplex.com"
     rel="nofollow"
     target="_blank"
     title="Share on LinkedIn">
    <i class="fa fa-linkedin"></i>
  </a>
</div>

  </div>
</div>

          </div>
          <!--div style="text-align:center;margin-bottom:20px">

            <a href="//namecheap.pxf.io/c/477033/408288/5618" target="_blank" rel="noopener nofollow">
              <img src="//a.impactradius-go.com/display-ad/5618-408288" border="0" alt="Search and buy domains from Namecheap. Lowest prices!" width="728" height="90" style="max-width:100%!important" />
            </a>
            <img height="0" width="0" src="//namecheap.pxf.io/i/477033/408288/5618" alt="Impact Radius" style="position:absolute;visibility:hidden;" border="0" />


            <a href="https://click.linksynergy.com/fs-bin/click?id=phY4769lVwA&offerid=467035.415&subid=0&type=4" target="_blank" rel="noopener nofollow">
              <img border="0" alt="Deep Learning Specialization on Coursera" src="https://ad.linksynergy.com/fs-bin/show?id=phY4769lVwA&bids=467035.415&subid=0&type=4&gridnum=16" style="max-width:100%!important">
            </a>

          </div-->

          <div class="card">
            
  <div id="comments">
    <div id="disqus_thread"></div>
    <script>
      var disqus_config = function () {
        this.page.url = 'how-to-integrate-highcharts-js-with-django.html';
        this.page.identifier = '/tutorial/2018/04/03/how-to-integrate-highcharts-js-with-django';
      };
      (function() {
      var d = document, s = d.createElement('script');
      s.src = 'http://simpleisbetterthancomplex.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
      })();
    </script>
    <script id="dsq-count-scr" src="http://simpleisbetterthancomplex.disqus.com/count.js" async></script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  </div>


          </div>
          <div class="card subscribe">
  <form action="https://colossus.simpleisbetterthancomplex.com/subscribe/d2320a41-0378-4aa8-8f4e-5bb1ffcd521d/" method="post" target="_blank" novalidate>
    <h4>
      <span class="fa fa-send" style="margin-right: 5px"></span> Subscribe to our Mailing List
    </h4>
    <h5>Receive updates from the Blog!</h5>
    <div class="row">
      <div class="eight columns">
        <input class="u-full-width" placeholder="Your email address" type="email" name="email">
      </div>
      <div class="four columns">
        <button type="submit" class="u-full-width">Subscribe</button>
      </div>
    </div>
  </form>
</div>

          <div class="card popular-posts">
  <h4>Popular Posts</h4>
  <div class="row">
    
      <div class="four columns">
        <a href="../../../2016/07/22/how-to-extend-django-user-model.html">
          <img src="../../../../media/2016-07-22-how-to-extend-django-user-model/featured-post-image.jpg" alt="How to Extend Django User Model" title="How to Extend Django User Model">
          How to Extend Django User Model
        </a>
      </div>
    
      <div class="four columns">
        <a href="../../../2016/05/11/how-to-setup-ssl-certificate-on-nginx-for-django-application.html">
          <img src="../../../../media/2016-05-11-how-to-setup-ssl-certificate-on-nginx-for-django-application/featured-post-image.jpg" alt="How to Setup a SSL Certificate on Nginx for a Django Application" title="How to Setup a SSL Certificate on Nginx for a Django Application">
          How to Setup a SSL Certificate on Nginx for a Django Application
        </a>
      </div>
    
      <div class="four columns">
        <a href="../../../2016/10/14/how-to-deploy-to-digital-ocean.html">
          <img src="../../../../media/2016/10/featured-do.jpg" alt="How to Deploy a Django Application to Digital Ocean" title="How to Deploy a Django Application to Digital Ocean">
          How to Deploy a Django Application to Digital Ocean
        </a>
      </div>
    
  </div>
</div>

        </div>
      </div>
    </div>
  </main>
  <footer>
  <div class="container">
    <ul>
      <li>© 2015-2021 simple complex</li>
      <li><a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank">cc by-nc-sa 3.0</a></li>
      <li>//</li>
      <li><a href="../../../../about/index.html" rel="author">about</a></li>
      <li><a href="../../../../contact/index.html">contact</a></li>
      <li><a href="../../../../faq/index.html">faq</a></li>
      <li><a href="../../../../cookies/index.html">cookies</a></li>
      <li><a href="../../../../privacy/index.html">privacy policy</a></li>
    </ul>
  </div>
</footer>
<div class="overlay"></div>

  
  <script id="ga-page-views" src="../../../../js/page-views.js" async></script>
  <script src="http://z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=1d8c6a0f-2136-49ad-b0b3-0b09662b7e28"></script>


<style>
.related-posts .row {
  display: grid;
  grid-gap: 20px;
  grid-template-columns: repeat(3, 1fr);
}

.related-posts .four.columns {
  width: 100%;
}
</style>

<script>
_bsa.init('recommended', 'CK7I4KJJ', 'placement:simpleisbetterthancomplexcom',
    {
      target: '.related-posts .columns',
      template: `
<div class="four columns">
<a href="##link##" rel="noopener nofollow">
<img src="##smallImage##" alt="##title##" title="##title##">[Sponsored] ##title##</a>
</div>
      `
    }
  );
</script>

<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": "https://simpleisbetterthancomplex.com/tutorial/2018/04/03/how-to-integrate-highcharts-js-with-django.html",
  "headline": "How to Integrate Highcharts.js with Django",
  "image": {
    "@type": "ImageObject",
    "url": "https://simpleisbetterthancomplex.com/media/2018/04/featured-highcharts.jpg",
    "height": 370,
    "width": 960
  },
  "datePublished": "2018-04-03T13:00:00+03:00",
  "dateModified": "2018-04-03T13:00:00+03:00",
  "author": {
    "@type": "Person",
    "name": "Vitor Freitas"
  },
   "publisher": {
    "@type": "Organization",
    "name": "Simple is Better Than Complex",
    "logo": {
      "@type": "ImageObject",
      "url": "https://simpleisbetterthancomplex.com/img/gplus_logo.png",
      "height": 60,
      "width": 600
    }
  },
  "description": "Highcharts is, in my opinion, one of the best JavaScript libraries to work with data visualization and charts outthere. Even though Highcharts is open source, it’s a commercial library. It’s free f..."
}
</script>

</body>

<!-- Mirrored from simpleisbetterthancomplex.com/tutorial/2018/04/03/how-to-integrate-highcharts-js-with-django.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 03 Sep 2021 12:44:15 GMT -->
</html>
